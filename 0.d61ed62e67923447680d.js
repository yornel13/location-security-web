(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"y+Kn":function(e,t,o){"use strict";o.r(t);var a=o("Y4Wx"),r=o("EJnR"),n=o("Awrb"),i=function(e){let t,o,a,r,i=e.getFromEnv("dataSource").dataset,l=t=e.getChildren().canvas[0].getChildren("vCanvas")[0],s=e.config.defaultDatasetType||"";return i?((a=e.getDSGroupdef())&&(Object(n.M)(t,a,"datasetGroup_"+s,1,[i]),r=t.getChildren("datasetGroup_"+s)),r&&(l=r[0]),o=e.getDSdef(),void Object(n.Q)(l,o,"dataset",i.length,i)):void e.setChartMessage()},l=o("/86W"),s=class extends a.a{constructor(){super(),this.registerFactory("dataset",i,["vCanvas"]),this.registerFactory("legend",l.a)}static getName(){return"MSCartesian"}getName(){return"MSCartesian"}getType(){return"chartAPI"}_createLayers(){super._createLayers();let e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}_manageLegendSpace(){r.a.call(this)}manageGradientLegendSpace(e){return r.b.call(this,e)}},c=o("Irj7"),h=o("acGC"),d=o("7YPV"),g=o("OEID"),p=o("v66I"),b=o("Ztfu"),u=o("MIw+"),m=o("qRpk"),f=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],v={"initial.dataset.entities":function(){return{"path.appearing":()=>(f[0].slot="plot",f),"path.updating":e=>[{finalAttr:function(){return e.finalAttr}}],"labelConnectors.appearing":()=>(f[0].slot="final",f),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(f[0].slot="final",f),"markerItem.updating":e=>[{finalAttr:function(){return e.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"group.updating":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"*":null}}},y=o("NamR");let C,O=Object(m.b)("redraphael","plugin"),x=window.navigator.userAgent,k=/msie/i.test(x)&&!window.opera,w=",",F="",j="top",A="bottom",L="right",S="left",E="middle",_="center",I="crisp",T=window.Math,P=T.min,R=T.max,M=/stroke/gi,B=/AppleWebKit/.test(x),D=T.ceil,Z=function(e,t){let o=t?Object(n.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=n.mb,o},V=function(e,t){let o,a={};if(t=t||1,!e||"object"!=typeof e)return a;for(o in e)M.test(o)||("stroke-width"===o?(a[o]=+e[o]/t,B&&(a[o]=a[o]&&D(a[o])||0)):a[o]=e[o]);return a},N={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*P(t,e-t)}},G={top:function(){return arguments[1]},middle:function(e,t){return 2*P(t,e-t)},bottom:function(e,t){return e-t}},H=function(e){let t,o=e&&e.length||0,a={};for(;o--;)(t=e[o]).id!==C&&(a[t.id.toLowerCase()]=t);return a};var W,z,X,K,Y,J,U,q,Q,$,ee;Object(m.a)({name:"mapsAnimation",type:"animationRule",extension:v}),W=O,Y=window.parseFloat,J=W._createNode,U=W._setFillAndStroke,q=W.el.constructor,Q={Q:"L",Z:"X",q:"l",z:"x",",":" "},$=/,?([achlmqrstvxz]),?/gi,ee=function(){return this.join(",").replace($,z)},W.svg?(z="$1",X=function(){var e=W.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);e?"string"==typeof e?e=e.replace($,z):e.toString=ee:e="M0,0",this.node.setAttribute("d",e.toString())},W._engine.litepath=function(e,t,o,a,r){var n,i=J("path");return(a||t).canvas.appendChild(i),(n=new q(i,t,a)).type="litepath",n.id=i.raphaelid=W._oid++,i.raphael=!0,U(n,r||{fill:"none",stroke:"#000"}),n},W._getPath.litepath=function(e){return W.parsePathString(e.node.getAttribute("d"))}):W.vml&&(z=function(e,t){return Q[t]||t},K=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},X=function(e){return e?"string"==typeof e?e=e.replace($,z):e.toString=ee:e="M0,0",this.node.path=e,this},W._engine.litepath=function(e,t,o,a,r){var n,i=J("shape"),l=i.style,s=new q(i,t,a);return l.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",o=Y(o),isNaN(o)?i.coordsize="21600 21600":(s._.bzoom=o,l.width="1px",l.height="1px",i.coordsize=s._.bcoord=o+" "+o),i.coordorigin=t.coordorigin,s.type="litepath",s.id=i.raphaelid=W._oid++,i.raphael=!0,s._transform=s.transform,s.transform=K,W._setFillAndStroke(s,r||{fill:"none",stroke:"#000"}),(a||t).canvas.appendChild(i),(n=J("skew")).on=!0,i.appendChild(n),s.skew=n,s},W._getPath.litepath=function(e){return W.parsePathString(e.node.path||"")}),W.fn.litepath=function(e,t,o){var a,r,n;return"object"==typeof e&&e.constructor!==q&&(a=e,r=(e=e.litepath).zoom,o=e.group),t&&t.constructor===q?(o=t,r=void 0):r=t,e&&e.constructor===q&&(o=e,e=""),(n=W._engine.litepath(e,this,r,o,a)).ca.litepath=X,e&&n.attr("litepath",W.is(e,"array")?[e]:e),this.__set__&&this.__set__.push(n),this._elementsById[n.id]=n};class te extends c.a{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,o,a,r,i,l,s,c,h=this,d=h.getFromEnv("chart").jsonData,g=h.config,p=d.map||d.chart,b=[],u=h.getFromEnv("colorManager"),m=d.entitydef||[];for(i in!g.attachEvent&&u&&(h.addExtEventListener("legendUpdate",function(){if("legend"===(c=arguments[1]).component)h.legendInteractivity(c.legendItem,c.colorObj);else for(l=(b=c.maxMinArray).length,s=0;s<l;s++)h.updateEntityColors(b[s].min,b[s].max)},u),g.attachEvent=!0),t=h.JSONData=d.data&&d.data[0]&&d.data[0].data?d.data[0].data||[]:d.data||[],g.useSNameAsId=Object(n.bb)(p.usesnameasid,0),this._redefineEntities(m),o=h.components.data,g.showTooltip=Object(n.bb)(p.showtooltip,1),g.showHoverEffect=Object(n.bb)(p.showhovereffect,0),t=H(t),h.calculateDataLimits(),d.colorrange||h.detachChild(h.getChildren("colorRange")&&h.getChildren("colorRange")[0].getId()),o)this._configureEntity(i,r=o[i],(a=t[i])?Object(n.Ma)(te._sanitizeEntityOptions(Object(n.T)({},a)),r.config):r.config)}updateEntityColors(e,t){let o,a,r,n,i,l,s=this.components.data,c=this.getFromEnv("chart"),h={"fill-opacity":0};for(n in s)r=(a=(o=s[n]).config).cleanValue,l={"fill-opacity":(i=a.alphaArr||[])[0]/100||1},r<e||r>t?(te.setCustomAttrs(o,h,c),o.hidden=!0):(o.hidden=!1,te.setCustomAttrs(o,l,c))}legendInteractivity(e,t){let o,a,r,n,i,l,s=this,c=s.getFromEnv("chart"),h=s.components.data,d=e.config,g=e.hasState("hidden"),p=s.getFromEnv("colorManager"),b={},u={"fill-opacity":0};for(o in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),h)h.hasOwnProperty(o)&&(l=p.getColorObj(r=(d=(a=h[o]).config).cleanValue),b["fill-opacity"]=(n=d.visibleEntityAttr)["fill-opacity"],i=g?b:u,t.code===(!l.outOfRange&&l.code)&&(a.hidden=!g,te.setCustomAttrs(a,i,c),g?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let o,a;e&&(a=(o=e.graphics).outlines).attr(t)}calculateDataLimits(){let e,t,o,a,r=this.getFromEnv("chart"),n=this.config,i=r.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(a=0,o=i.length;a<o;a++)e=l.getCleanValue(t=i[a].value),s=P(s,e),c=R(c,e);n.max=c,n.min=s}_configureEntity(e,t,o){let a,r,i,l,s,c,h,d,g,b,u,m,f,v,y,O,x,k,j,A,L,S,I=this,T=I.getFromEnv("chart"),P=I.config,R=this.getFromEnv("number-formatter"),M=T.config.entityOpts,B=t.config,D=t.labelConfig,V=o.value,N=B.cleanValue=R.getCleanValue(V),G=B.formattedValue=N===C?C:R.dataLabels(N),H=Object(n.bb)(o.showtooltip,M.showTooltip),W=this._getDefaultTooltip(t,o,I),z={formattedValue:G,sName:o.shortLabel,lName:o.label},X=M.dataLabels.style,K=B.toolText=H?Object(n.Xa)(Object(n.Za)(Object(n.Wa)(Object(n.Za)(o.tooltext,M.tooltext,W),[1,2,7,38,39],z,o))):F,Y=B.borderColor=Object(n.Za)(o.bordercolor,M.borderColor),J=B.borderAlpha=Object(n.Za)(o.borderalpha,M.borderAlpha),U=B.borderThickness=Object(n.bb)(o.borderthickness,M.borderThickness),q=M.hoverOnNull,Q=B.useHoverColor=Object(n.bb)(o.showhovereffect,o.usehovercolor,q?M.showHoverEffect:isNaN(V)?0:M.showHoverEffect),$=B.labelAlignment,ee=I.getFromEnv("colorManager");if(t.hidden=!1,B.showLabel=Object(n.bb)(o.showlabel,M.showLabels),B.labelPadding=Object(n.bb)(o.labelpadding,M.labelPadding),B.fontFamily=Object(n.Za)(o.font,X.fontFamily),B.fontSize=Object(n.bb)(parseInt(o.fontsize,10),parseInt(X.fontSize,10)),B.fontBold=Object(n.bb)(o.fontbold,0),B.fontColor=Object(n.Za)(o.fontcolor,X.color),B.connectorColor=Object(n.Za)(o.labelconnectorcolor,M.connectorColor),B.connectorAlpha=Object(n.Za)(o.labelconnectoralpha,M.connectorAlpha),B.hoverBorderThickness=Object(n.bb)(o.borderhoverthickness,o.hoverborderthickness,M.hoverBorderThickness),B.hoverBorderColor=Object(n.Za)(o.borderhovercolor,o.hoverbordercolor,M.hoverBorderColor,B.borderColor),B.hoverBorderAlpha=Object(n.Za)(o.borderhoveralpha,o.hoverborderalpha,M.hoverBorderAlpha,B.borderAlpha),B.connectorThickness=Object(n.bb)(o.labelconnectorthickness,M.connectorThickness),B.origConnectorThickness=B.connectorThickness,B.borderThickness=U,B.link=o.link,B.isVisible=!0,B.id=e,B.originalId=o.origId,null!==N&&(a=ee&&ee.getColor(N))&&!a.outOfRange&&(O=a.code,a.oriAlpha!==C&&(x=a.oriAlpha+"")),Object(n.Za)(o.color,o.alpha,o.angle,o.ratio)===C?(v=Z({color:Object(n.Za)(O,M.fillColor),alpha:Object(n.Za)(x,M.fillAlpha),angle:Object(n.Za)(M.fillAngle),ratio:Object(n.Za)(M.fillRatio)}),f=Z({color:Object(n.Za)(M.nullEntityColor),alpha:Object(n.Za)(M.nullEntityAlpha),angle:Object(n.Za)(M.nullEntityAngle),ratio:Object(n.Za)(M.nullEntityRatio)}),s=(g=null===N?f:v).FCcolor.color,c=g.FCcolor.alpha,h=g.FCcolor.angle,d=g.FCcolor.ratio):(s=Object(n.Za)(o.color,O,M.fillColor),c=Object(n.Za)(o.alpha,x,M.fillAlpha),h=Object(n.Za)(o.angle,M.fillAngle),d=Object(n.Za)(o.ratio,M.fillRatio),g=Z({color:s,alpha:c,angle:h,ratio:d})),K===F&&(P.showTooltip=0),B.visibleEntityAttr={stroke:Object(p.c)(Y,J),fill:(B.fillColor=g).toString(),"fill-opacity":c/100},S=c.split(w),B.alphaArr=S,Q&&(Object(n.Za)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===C?(!M.hoverColorObject&&(M.hoverColorObject=Z({color:M.hoverFillColor,alpha:M.hoverFillAlpha,angle:M.hoverFillAngle,ratio:M.hoverFillRatio})),y=M.hoverColorObject):(s=Object(n.Za)(o.fillhovercolor,o.hoverfillcolor,M.hoverFillColor),c=Object(n.Za)(o.fillhoveralpha,o.hoverfillalpha,M.hoverFillAlpha),h=Object(n.Za)(o.fillhoverangle,o.hoverfillangle,M.hoverFillAngle),d=Object(n.Za)(o.fillhoverratio,o.hoverfillratio,M.hoverFillRatio),y=Z({color:s,alpha:c,angle:h,ratio:d})),B.hoverColor=y),D||(D=t.labelConfig={}),b=B.fontColor,u=B.fontFamily,m=B.fontBold,K=B.toolText,r=B.link,$?(i=$[0],l=$[1]):(i=_,l=E),D.align=i,D.vAlign=l,D.bgColor=F,D.borderColor=F,D.fontColor=b,D.fontFamily=u,D.fontBold=m,D.toolText=K,D.link=r,"object"==typeof B.options)for(k=B.entityLabels=B.entityLabels||[],L=(A=B.labels||[]).length;L--;)k[L]||(k[L]={config:{}}),D=k[L].config,($=A[L].labelAlignment)?(i=$[0],l=$[1]):(i=_,l=E),D.align=i,D.vAlign=l,D.displayValue=I.getDisplayValue(t,A[L],B.options.isDataEnabled,!L,o),D.bgColor=F,D.borderColor=F,D.toolText=K,D.align=i,D.vAlign=l,D.bgColor=F,D.borderColor=F,D.fontColor=b,D.fontFamily=u,D.fontBold=m,D.toolText=K;else D.displayValue=I.getDisplayValue(t,j={shortText:B.shortLabel,text:B.label},!0,!0,o)}getDisplayValue(e,t,o,a,r){let i,l=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,h=s.formattedValue,d=l.labelSepChar;return o?a&&void 0!==r.displayvalue?i=r.displayvalue:(i=Object(n.Za)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==c&&(i=i===C?h:i+d+h)):i=s.label,i}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,o,a,r,i,l,s,c,h,d,g,p,b=this,u=b.config,m={},f={},v=b.getFromEnv("chart").config.entities,y=u.useSNameAsId,C=0;for(t=e.length;t--;)if(a=(o=e[t]).internalid,r=o.newid?o.newid:a,i=o.sname,l=o.lname,p=v[a],a=Object(n.ob)(a),r=(r=Object(n.ob)(r))&&r.toLowerCase(),p){for(g in m[r]=c={origId:a},f[a]=!0,p)c[g]=p[g];c.shortLabel=i||p.shortLabel,c.label=l||p.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(s in(d=b.components.data)||(d=b.components.data={}),m)d[s=s.toLowerCase()]||(d[s]={config:{}}),d[s].config=m[s],C+=1;for(s in h=d,v)if(c=v[s],!f[s=Object(n.ob)(s)]){for(g in y?(!(p=h[c.shortLabel.toLowerCase()])&&(p=h[c.shortLabel.toLowerCase()]={}),p.config={},p.origId=c.shortLabel):(!(p=h[s.toLowerCase()])&&(p=h[s.toLowerCase()]={}),p.config={},p.config.origId=s),c)p.config[g]=c[g];C+=1}u.entityCount=C}draw(){let e,t=this.config,o=this.getFromEnv("chart"),a=n.Ia?200:10;this.config.ready=!1,t.BATCH_SIZE=a,t.labelBatchSize=n.Ia?200:20,(e=this._batchRender())(0),o.config.entityFlag=!0,o.checkComplete()}_batchRender(){let e,t,o,a,r,n=this,i=n.config,l=n.getFromEnv("chart").config.entities.firstEntity,s=n.components.data,c=i.BATCH_SIZE,h=i.entityKeys=l?n._getKeys(l,s):Object.keys(s),d=i.entityLength=h.length,g=function(i){for(e=i,o=0;h[e]!==C;)if(r=n.drawEntity(t=s[h[e]],c),o+=r,t.config.drawn&&((a=e===d-1?t:s[h[e-1]])&&(a.config.drawn=!1,a.config.outlineStartIndex=C),e++),o>=c){n.addJob("entityDraw",g.bind(this,e),y.b.entitydraw);break}e===d&&(n._addEventListenersToEntities(0),n.initComplete())};return g}_addEventListenersToEntities(e){let t,o,a,r,n=this,i=n.components.data,l=n.config,s=l.BATCH_SIZE,c=l.entityKeys,h=l.entityLength,d=0;for(t=e;t<h;t++)if((a=(r=(o=i[c[t]]).config).options)&&!1===a.isDataEnabled||n.addMouseGestures(o),++d===s){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),y.b.entitydraw);break}}static _getKeys(e,t){let o=[e],a=e;for(;t[a];)o.push(a=t[a].nextId);return o}_getDefaultTooltip(e,t){let o,a,r=e.config.cleanValue,n=e.config.formattedValue,i=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(a=t.labels&&t.labels[0]))return C;o=(i.useSNameInTooltip?a.shortText:a.text)+(null===r?F:i.tooltipSepChar+n)}else o=(i.useSNameInTooltip?t.shortLabel:t.label)+(null===r?F:i.tooltipSepChar+n);return o}drawEntity(e,t){let o,a,r,i,l,s,c,h,d,g=this,p=g.getFromEnv("chart"),b=p.getFromEnv("animationManager"),u=e.config,m=n.Ia||!k?"litepath":"path",f=p.config.entityOpts,v=u.outlines,y=g.getFromEnv("toolTipController"),O=this.getLinkedParent().getChildContainer("plot"),x=this.getLinkedParent().getChildContainer("plotShadow"),w=u.toolText,F=f.shadow,j=[],A={};if(g._configureEntityDrawingParams(e),r=(u=e.config).visibleEntityAttr,d=u.shadowOptions,o=u.outlineStartIndex===C?v.length:u.outlineStartIndex,e.graphics||(e.graphics={}),c=0,j=u.outlinePath||(u.outlinePath=[]),h=u.customStrokeWidthModifier,"object"==typeof u.options){for(;o--;)if(j=v[o].outline,i=!0===u.options.isDataEnabled?r:Object(n.T)(Object(n.T)({},r),V(v[o].style,h)),(l=e.graphics.outlines)||(l=e.graphics.outlines=[]),l[o]||(l[o]={}),s=l[o].outline,i[m]=j,(s=l[o].outline=b.setAnimation({el:m,container:O,attr:i,component:g,label:"path"})).shadow(!!F&&d,x),y.enableToolTip(s,w),c++,u.outlineStartIndex=o,c===t)return c;return u.drawn=!0,c}for(;o--;)if(j=(a=v[o]).concat(j),c++,u.outlineStartIndex=o,c===t)return u.outlinePath=j,c;return e.graphics.outlines||(r[m]=j),Object.assign(A,r,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=b.setAnimation({el:e.graphics.outlines||m,container:O,attr:A,component:g,label:"path"}),u.drawn=!0,u.outlineStartIndex=0,u.outlinePath=[],e.graphics.outlines.shadow(!!F&&d,x),y.enableToolTip(e.graphics.outlines,w),c}_configureEntityDrawingParams(e){let t,o=this.getFromEnv("chart"),a=e.config,r=o.config.scalingParams,i=!k||n.Ia,l=r.scaleFactor,s=r.strokeWidth,c=(i?o.baseScaleFactor:1)*s,h=1===o.config.entityOpts.scaleBorder,d=a.borderThickness,g=a.origConnectorThickness,p=a.hoverBorderThickness,b=a.visibleEntityAttr,u=b["fill-opacity"];a.shadowOptions={scalefactor:[l,l*o.config.baseScaleFactor],opacity:R.apply(T,a.alphaArr)/100,useFilter:0},a.fillOpacity=e.hidden?0:u,i?(d=a.entityBorderThickness=h?d*c:d/l,g/=l,t=h?l:r.sFactor,p&&(p=a.hoverBorderThickness=h?p*c:p/l)):(d=h?d*s:d,t=h?r.scaleFactor:o.baseScaleFactor),a.entityBorderThickness=d,a.connectorThickness=g,a.customStrokeWidthModifier=t,b["stroke-width"]=d,b.transform=n.Ia||!k?"":r.transformStr}drawLabels(e){let t,o,a,r,n=this,i=e,l=n.getFromEnv("chart"),s=n.config,c=s.labelBatchSize,h=s.entityLength,d=[],g=0,p=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[g],u=0,m=0,f=l.getFromEnv("toolTipController"),v=l.config.annotationConfig;for(t in p||(r=new b.a,l.attachChild(r,"mapLabelAnnotations"),p=l.getChildren("mapLabelAnnotations")[g]),p.clear(),p._renderer&&(p._renderer=null),v.showbelow=0,i){if(n.drawLabel(i[t],d),++u===c){for(p.annotation.injectDependency("paper",l.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",f),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=p.addGroup(Object.assign(v,{id:"entityLabels"+g,items:d,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("mouseover",d[o].onmouseover),a.items[o].addEventListener("mouseout",d[o].onmouseout),a.items[o].addEventListener("click",d[o].onclick);g++,(p=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[g])||(r=new b.a,l.attachChild(r,"mapLabelAnnotations"),p=l.getChildren("mapLabelAnnotations")[g]),p.clear(),p._renderer&&(p._renderer=null),u=0,d=[]}else if(m==h-1){for(p.annotation.injectDependency("paper",l.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",f),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=p.addGroup(Object.assign(v,{id:"entityLabels"+g,items:d,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("mouseover",d[o].onmouseover),a.items[o].addEventListener("mouseout",d[o].onmouseout),a.items[o].addEventListener("click",d[o].onclick)}m++}n.drawLabelConnFn(0)}drawLabelConnFn(e){let t,o,a,r,n,i=this,l=i.config,s=i.components.data,c=l.BATCH_SIZE,h=l.entityKeys,d=h.length,g=0;for(o=e;o<d;o++){if("object"==typeof(r=(n=s[h[o]]).config).options)for(t=(a=r.labels)&&a.length||0;t--;)a[t].labelConnectors&&(i.drawLabelConnectors(n,a[t].labelConnectors,i),g++);else r.labelConnectors&&(i.drawLabelConnectors(n,r.labelConnectors,i),g++);if(g===c){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),y.b.entitydraw);break}}}_getLabelObject(e,t,o){let a,r,n,i,l,s,c,h,d,g,p,b,u=this,m=u.getFromEnv("chart"),f=e.config,v=m.config.scalingParams,y=e.graphics&&e.graphics.outlines,O=f.fontSize,x=f.labelPadding;return t===C?(a=e.labelConfig,r=f.labelPosition,n=f.labelAlignment):(i=(a=(b=(f.entityLabels||[])[t]).config).style=(p=(f.labels||[])[t]).style,r=p.labelPosition,n=p.labelAlignment),r?(l=r[0],s=r[1]):(l=(c=y.getBBox()).x+c.width/2,s=c.y+c.height/2),n?(d=n[1],(h=n[0])===L?l-=x:h===S&&(l+=x),d===j?s-=x:d===A&&(s+=x)):(h=_,d=E),g=parseFloat(O)/v.sFactor,!o&&i&&(i.color&&(a.fontColor=i.color),i["font-size"]&&(g=parseFloat(i["font-size"])/v.sFactor),i["font-family"]&&(a.fontFamily=i["font-family"]),i["font-weight"]!==C&&(a.fontBold="bold"===i["font-weight"])),a.x=l.toString(),a.y=s.toString(),a.wrap=1,a.type="text",a.fontSize=g,{x:l.toString(),y:s.toString(),wrapwidth:N[h](void 0,l+void 0)-x,wrapheight:G[d](void 0,s+void 0)-x,wrap:1,type:"text",align:a.align,valign:a.vAlign,text:a.displayValue,tooltext:a.toolText,css:a.link!==C&&{cursor:"pointer",_cursor:"hand"},bgcolor:a.bgColor,bordercolor:a.borderColor,fillcolor:a.fontColor,fontsize:a.fontSize,font:a.fontFamily,bold:a.fontBold,onclick:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)u.entityClick(r[o].outline,t);else u.entityClick(r,t)},onmouseover:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)u.entityRollOver(r[o].outline,t);else u.entityRollOver(r,t)},onmouseout:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)u.entityRollOut(r[o].outline,t);else u.entityRollOut(r,t)},ontouchstart:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)u.entityRollOver(r[o].outline,t);else u.entityRollOver(r,t);u.entityRollOver(r,t)}}}drawLabel(e,t){let o,a,r,n=this,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(a=(r=i.labels)&&r.length||0,o=i.options.isDataEnabled;a--;)t.push(n._getLabelObject(e,a,o,!a));else t.push(n._getLabelObject(e,C,!0,!0))}drawLabelConnectors(e,t,o){let a,r,i=e.config,l=this,s=l.getFromEnv("chart"),c=s.getFromEnv("animationManager"),h=s.config.scalingParams,d=o.getLinkedParent().getChildContainer("plot"),g=t&&t.length||0,b=i.showLabel;for(;g--;)a=e.graphics.connectorElem,b?e.graphics.connectorElem=a=c.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:r=t[g],opacity:1,transform:n.Ia||!k?"":h.transformStr,stroke:Object(p.c)(i.connectorColor,i.connectorAlpha),"shape-rendering":I,"stroke-width":i.connectorThickness},container:d,component:l,label:"labelConnectors"}):a&&a.hide()}entityClick(e,t){let o=e.node.__entity,a=this.getFromEnv("chart"),r=a.config.scalingParams,n=o.graphics.outlines.getBBox(),i=a.getFromEnv("linkClickFN"),l=o.config,s=l.link;n.width*=r.scaleFactor,n.height*=r.scaleFactor,n.x=n.x*r.scaleFactor+r.translateX,n.y=n.y*r.scaleFactor+r.translateY,n.x2=n.x+n.width,n.y2=n.y+n.height,a.fireChartInstanceEvent("entityclick",l.eventArgs,t),s!==C&&i.call({link:s,entity:o,entityBox:n},!0)}entityRollOver(e,t){let o=e.node.__entity,a=o.config,r=this.getFromEnv("chart"),n=r.getFromEnv("animationManager"),i=a.hoverAttr;r.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):a.useHoverColor&&a.isVisible&&!o.hidden&&i&&(r.config.hoverEntity=e,n.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let o,a=e.node.__entity,r=this,n=r.getFromEnv("chart"),i=n.getFromEnv("animationManager"),l=a.config.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),a.config.timer=setTimeout(function(){!0!==(o=a.hidden)&&l&&(i.setAnimation({el:e,attr:l,component:r,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,o,a,r,i,l=e.config,s=l.originalId,c=this,h=e.graphics,d=l.useHoverColor,g=l.hoverBorderThickness,b=l.hoverBorderColor,u=l.hoverBorderAlpha,m=l.entityBorderThickness,f=l.borderColor,v=l.borderAlpha,y=l.link,O=l.visibleEntityAttr,x=function(t){y!==C&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",l.eventArgs),t.data("groupId","groupId"+s),t.node.__entity=e,e._listenersBinded||t.click(c.entityClick.bind(c,t)).hover(c.entityRollOver.bind(c,t),c.entityRollOut.bind(c,t))};for(t in l.eventArgs={value:l.cleanValue,label:l.label,shortLabel:l.shortLabel,originalId:l.origId,id:l.id||l.origId},l.legacyEventArgs={value:l.value,lName:l.label,sName:l.shortLabel,id:l.originalId||l.id},d&&(l.hoverAttr={fill:Object(n.mb)(l.hoverColor)},l.revertAttr={fill:Object(n.mb)(l.fillColor),stroke:Object(n.mb)(l.borderColor,l.borderAlpha)},l.revertAttr["fill-opacity"]=O["fill-opacity"],g!==m&&(l.hoverAttr["stroke-width"]=Object(n.bb)(g,m),l.revertAttr["stroke-width"]=m),(b!==f||u!==v)&&(l.hoverAttr.stroke=Object(p.c)(b,u),l.revertAttr.stroke=Object(p.c)(f,v))),h)if(h.hasOwnProperty(t))if(h[t]instanceof Array){for(o=0,r=(i=h[t]).length;o<r;o++)x(a=i[o].outline);e._listenersBinded=!0}else x(a=h[t]),e._listenersBinded=!0}getDataLimits(){let e=this.config;return{max:e.max,min:e.min}}initComplete(){let e=this.getFromEnv("chart");this.drawLabels(this.components.data),e.config.entitiesReady=!0,e.checkComplete()}}var oe,ae=te,re=function(e,t,o,a,r){var n=Math.pow;return n(o-e,2)+n(a-t,2)<=n(r,2)},ne=Math.PI,ie=Math.cos,le=Math.sin,se=Math.max,ce=Math.min,he=ne/180,de=function(e,t,o,a,r,n){var i,l,s;return i=(a-t)*(r-o),l=(o-e)*(n-a),isNaN(i)&&(i=0),isNaN(l)&&(l=0),0==(s=i-l)?0:0<s?1:2},ge=function(e,t,o,a,r,n){return!!(o<=se(e,r)&&o>=ce(e,r)&&a<=se(t,n)&&a>=ce(t,n))},pe=function(e,t,o,a,r,n,i,l){var s=de(e,t,o,a,r,n),c=de(e,t,o,a,i,l),h=de(r,n,i,l,e,t),d=de(r,n,i,l,o,a);return!!(s!==c&&h!==d||0===s&&ge(e,t,r,n,o,a)||0===c&&ge(e,t,i,l,o,a)||0===h&&ge(r,n,e,t,i,l)||0===d&&ge(r,n,o,a,i,l))},be=function(e,t,o,a,r,n,i){var l,s,c,h,d,g,p,b=0,u=!1;if(re(e,t,o,a,r)&&3<=n){for(p=2*ne/n,c=o+r*ie(-(s=i===oe?.5*ne:i%360*he)),g=a+r*le(-s),l=0;l<n;l++){if(h=o+r*ie(-(s+=p)),d=a+r*le(-s),pe(c,g,h,d,e,t,1/0,t)){if(0===de(c,g,e,t,h,d))return ge(c,g,e,t,h,d);b++}c=h,g=d}u=0!=b%2}return u},ue=(e,t)=>!e||e&&t&&t.i>e.i?t:e;class me{constructor(e){this.configure(e)}configure(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}defaultValidator(){var e=Math.pow,t=this;return function(o){var a=t.mousePoint;return!!(o&&1>=e((o.x-a.x)/t.xLimit,2)+e((o.y-a.y)/t.yLimit,2))}}shapeValidator(){var e=this;return function(t){var o,a,r,n,i=e.mousePoint,l=t&&t.shapeInfo,s=!1,c=i.x,h=i.y;return"circle"===(o=l&&l.type)?s=re(c,h,t.x,t.y,a=l.radius):"arc"===o?(a=l.radius,s=!re(c,h,t.x,t.y,l.innerradius)&&re(c,h,t.x,t.y,a)):"polygon"===o?s=be(c,h,t.x,t.y,a=l.radius,l.sides,l.startAngle):"rect"===o||"rectangle"===o?(n=t.y,s=c>=(r=t.x)&&c<=r+(l.width||0)&&h>=n&&h<=n+(l.height||0)):"default"===o&&(s=!1),s}}buildKdTree(e){return this.kdTree=function(e){function t(e,t,o){var a=e[t];e[t]=e[o],e[o]=a}var o,a,r,n=e&&e[0]&&e[0].r||5,i=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,h=Math.log,d=Math.exp,g=Math.pow;for(a=function(e,o,r,n){for(var g,p,b,u,m,f,v,y,C,O;n>r;){for(600<n-r&&(p=o-r+1,b=h(g=n-r+1),u=.5*d(2*b/3),m=.5*s(b*u*(g-u)/g)*(0>p-g/2?-1:1),f=i(r,l(o-p*u/g+m)),v=c(n,l(o+(g-p)*u/g+m)),a(e,o,f,v)),y=e[o],C=r,O=n,t(e,r,o),e[n].x>y.x&&t(e,r,n);C<O;){for(t(e,C,O),C++,O--;e[C].x<y.x;)C++;for(;e[O].x>y.x;)O--}e[r].x===y.x?t(e,r,O):t(e,++O,n),O<=o&&(r=O+1),o<=O&&(n=O-1)}},r=function(e,o,a,n){for(var g,p,b,u,m,f,v,y,C,O;n>a;){for(600<n-a&&(p=o-a+1,b=h(g=n-a+1),u=.5*d(2*b/3),m=.5*s(b*u*(g-u)/g)*(0>p-g/2?-1:1),f=i(a,l(o-p*u/g+m)),v=c(n,l(o+(g-p)*u/g+m)),r(e,o,f,v)),y=e[o],C=a,O=n,t(e,a,o),e[n].y>y.y&&t(e,a,n);C<O;){for(t(e,C,O),C++,O--;e[C].y<y.y;)C++;for(;e[O].y>y.y;)O--}e[a].y===y.y?t(e,a,O):t(e,++O,n),O<=o&&(a=O+1),o<=O&&(n=O-1)}},o=(e=e||[]).length;o--;)e[o].r>n&&(n=e[o].r),e[o].i=o,e[o].x=+e[o].x,e[o].y=+e[o].y;return{tree:0===e.length?{}:function e(t,o,n,i){var l,s={},c=i?"y":"x";return o===n?(s.point=t[o],s):1==n-o?(t[o][c]>t[n][c]?(s.point=t[o],s.left={point:t[n]}):(s.point=t[n],s.left={point:t[o]}),s):(l=o+n>>1,i?r(t,l,o,n):a(t,l,o,n),s.point=t[l],s.left=e(t,o,l-1,!i),s.right=e(t,l+1,n,!i),s)}(e,0,e.length-1,!1),search:function(e,t,o,a){function r(e,t,o,a){return s(g(e-o,2)+g(t-a,2))}function i(a,n){return"circle"===o?r(a,n,e,t)<=u:a>=u&&a<=m&&n>=f&&n<=v}function l(e,t,o){return e>=t&&e<=o}function c(o){var a=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),n=r(e,t,o.point.x,o.point.y);return d?void(a?y?o.point.i>d.point.i&&(d=o,y=a,C=n):(d=o,y=a,C=n):!y&&n<C&&(d=o,y=a,C=n)):(d=o,y=a,void(C=n))}function h(a,r){"circle"===o?u=a:(u=e-a||0,m=e+a||0,f=t-r||0,v=t+r||0)}var d,p,b,u=e-n,m=e+n,f=t-n,v=t+n,y=!1,C=0;return a=a||{},b=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),f<=e.point.y&&p(e.left),v>=e.point.y&&p(e.right))},(p=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),u<=e.point.x&&b(e.left),m>=e.point.x&&b(e.right))})(this.tree),d&&d.point||d}}}(e),this.tree=this.kdTree.tree,this}getNeighbour(e,t,o){var a=this,r=a.tree,n={x1:e.x-a.xLimit,x2:e.x+a.xLimit,y1:e.y-a.yLimit,y2:e.y+a.yLimit},i=a.validatorFn;return a.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):r?a._searchBtwnLimit(n,r,!0,i):void 0}_searchBtwnLimit(e,t,o,a){var r,n,i=o?e.x1:e.y1,l=o?e.x2:e.y2;if((r=t&&t.point&&t.point[o?"x":"y"])!==oe)return a(t.point)&&(n=t.point),r>=i&&t.left&&(n=ue(n,this._searchBtwnLimit(e,t.left,!o,a))),r<=l&&t.right&&(n=ue(n,this._searchBtwnLimit(e,t.right,!o,a))),n}_setSearchLimit(e,t){this.xLimit=e,this.yLimit=t}}me.prototype.constructor=me;var fe=me;let ve,ye=window.navigator.userAgent,Ce=/msie/i.test(ye)&&!window.opera,Oe="",xe="top",ke="bottom",we="right",Fe="left",je="middle",Ae="center",Le=.6,Se=window.Math,Ee=Se.min,_e=Se.max,Ie="items",Te=Math.PI/180,Pe="rgba(192,192,192,"+(Ce?.002:1e-6)+")",Re=function(e,t){let o=t?Object(n.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=n.mb,o},Me=function(e,t){let o,a=e&&e.length||!1,r=t||"id",n={};if(!e)return e;for(;a--;)(o=e[a])[r]!==ve&&(n[o[r].toLowerCase()]=o);return n};Object(m.a)({name:"mapsAnimation",type:"animationRule",extension:v});class Be extends ae{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:Ae,valign:xe}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:we,valign:je}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:Fe,valign:je}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:Ae,valign:ke}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:Ae,valign:je}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*Ee(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*Ee(t,e-t)},bottom:function(e,t){return e-t}}}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(e){this.JSONData=e;let t=this,o=t.getFromEnv("chart").config.markerOpts;t.calculateDataLimits(),o.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,o=e.config,a=e.getFromEnv("chart"),r=Be.getMarkerRadiusLimits(a.config.width,a.config.height,t.markermaxradius,t.markerminradius);o.minRadius=r.min,o.maxRadius=r.max}}calculateDataLimits(){let e,t,o,a,r,n=this.getFromEnv("chart"),i=this.config,l=(n.jsonData.markers||{})[Ie]||[],s=this.getFromEnv("number-formatter"),c=1/0,h=-1/0;for(r=0,o=l.length;r<o;r++)null!==(t=s.getCleanValue(a=(e=l[r]).value))&&(c=Ee(t,c),h=_e(t,h));i.min=c,i.max=h}_parseMarkers(){let e,t,o,a,r,i,l,s,c=this,h=c.getFromEnv("chart"),d=h.jsonData.markers,g=d[Ie],p=d.shapes,b=h.config.markerOpts,u=this.getFromEnv("number-formatter"),m=c.components.shapeObjs={},f=c.components.markerObjs={};if(g&&g.length){if(p&&p.length)for(t=p.length;t;t-=1)(s=(a=p[t-1]).id.toLowerCase())&&(m[s]=a);for(t=g.length;t--;)(s=(a=g[t]).id&&a.id.toLowerCase())&&((e=a.value)!==ve&&""!==e&&(e=parseFloat(e)),(r=(o=Be._initializeMarkerItem(s,a,null,h)).config.options.shapeid)&&"string"==typeof r&&(r=r.toLowerCase()),l=(i=o.config).options,i.cleanValue=u.getCleanValue(e),i.formattedValue=null===i.cleanValue?ve:u.dataLabels(e),i.fillColor=Object(n.Za)(l.fillcolor,l.color,b.fillColor),i.fillAlpha=Object(n.Za)(l.fillalpha,l.alpha,b.fillAlpha),i.fillRatio=Object(n.Za)(l.fillratio,b.fillRatio),i.fillAngle=Object(n.Za)(l.fillangle,b.fillAngle),i.borderThickness=Object(n.bb)(l.borderthickness,b.borderThickness),i.borderColor=Object(n.Za)(l.bordercolor,b.borderColor),i.borderAlpha=Object(n.Za)(l.borderalpha,b.borderAlpha),i.labelPadding=l.labelpadding||b.labelPadding,o.dataset=c,a.__hideMarker&&(o._isHidden=!0),r&&(o.shapeObj=m[r]),f[s]=o)}}defineMarkersNShapes(){let e,t,o,a,r,i,l,s,c=this,h=c.getFromEnv("chart"),d=h.jsonData.markers,g=d.definition,p=this.getFromEnv("number-formatter"),b=h.config.markerOpts,u=Me(g)||{},m=Me(d.application)||{},f=d.shapes,v=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),y=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={});if(g&&g.length){if(f&&f.length)for(a=f.length;a;a-=1)(s=(i=f[a-1]).id.toLowerCase())&&(v[s]=i);for(s in u)(r=y[s]=Be._initializeMarkerItem(s,i=u[s],m[s],h)).dataset=c,l=r.config.options.shapeid,(t=r.config).cleanValue=p.getCleanValue(o=i.value),e=t.options,t.formattedValue=null===t.cleanValue?ve:p.dataLabels(o),t.fillColor=Object(n.Za)(e.fillcolor,e.color,b.fillColor),t.fillAlpha=Object(n.Za)(e.fillalpha,e.alpha,b.fillAlpha),t.fillRatio=Object(n.Za)(e.fillratio,b.fillRatio),t.fillAngle=Object(n.Za)(e.fillangle,b.fillAngle),t.borderThickness=Object(n.bb)(e.borderthickness,b.borderThickness),t.borderColor=Object(n.Za)(e.bordercolor,b.borderColor),t.borderAlpha=Object(n.Za)(e.borderalpha,b.borderAlpha),t.labelPadding=e.labelpadding||b.labelPadding,t.options.tooltext=Object(n.Za)(e.tooltext,b.tooltext),t.link=e.link,l&&(r.shapeObj=v[l.toLowerCase()])}}static getMarkerRadiusLimits(e,t,o,a){let r=Ee(e,t);return a=parseFloat(a),o=parseFloat(o),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?{min:.02*r,max:.07*r}:{min:parseInt(o/10,10),max:o}:{min:a,max:10*a}:a<o?{min:a,max:o}:{min:o,max:a}}getDataLimits(){let e=this.config;return{min:e.min,max:e.max}}static _initializeMarkerItem(e,t,o){let a,r={},i=r.config;return i||(i=r.config={}),i.id=e,i.definition=t,i.application=o,i.hasValue=null,i.value=null,i.options=null,i.label=null,i.markerShape=null,i.markerLabel=null,i.drawOptions={shape:null,label:null},i.drawComplete=!1,a=r.config.options=Object(n.T)({},i.definition),i.dataEnabled?!isNaN(a.value)&&""!==a.value&&(r.value=parseFloat(a.value),r.hasValue=!0):i.applyAll?i.options=Object(n.T)(a,i.application):o&&(i.options=Object(n.T)(a,i.application)),r}configureConnectors(){let e,t,o,a,r,i,l,s,c,h,d,g,p,b,u=this,m=u.getFromEnv("chart"),f=m.jsonData.markers||{},v=f.connector||f.connectors||[],y=u.components.markerObjs,C=v.length,O=u.components.connectors,x=function(e){return function(t){let o=this,a=o.getElement();a&&o.unfilteredConfig.hoverEffect&&a.attr(o.unfilteredConfig._hoverAttrs),m.fireChartInstanceEvent("connectorrollover",e,t)}},k=function(e){return function(t){let o=this,a=o.getElement();a&&o.unfilteredConfig.hoverEffect&&a.attr(o.unfilteredConfig._defaultAttrs),m.fireChartInstanceEvent("connectorrollout",e,t)}},w=function(e){return function(t){m.fireChartInstanceEvent("connectorClick",e,t)}},F=m.config.connectorOpts,j={};for(O=u.components.connectors=[],b=0;b<C;b++)((p=v[b]).from||p.to)&&(t=y[p.from.toLowerCase()],o=y[p.to.toLowerCase()],t&&o)&&(a=v[b].label,(j=O[b])||(j=O[b]={}),j.config||(e=j.config={}),j.graphics||(j.graphics={}),(e=j.config=Object(n.T)({},p)).fromMarker=t,e.toMarker=o,e.link=p.link,e.showTooltip=Object(n.bb)(p.showtooltip,F.showTooltip),r=e.tooltext=e.showTooltip?Object(n.Za)(p.tooltext,F.tooltext):Oe,i=e.thickness=Object(n.Za)(p.thickness,F.thickness),l=e.color=Object(n.Za)(p.color,F.color),s=e.alpha=Object(n.Za)(p.alpha,F.alpha),e.hoverEffect=Object(n.bb)(p.showhovereffect,F.showHoverEffect),c=Object(n.Za)(p.hovercolor,F.hoverColor,l),h=Object(n.Za)(p.hoveralpha,F.hoverAlpha,s),d=Object(n.Za)(p.hoverthickness,F.hoverThickness,i),e.dashed=Object(n.Za)(p.dashed,F.dashed),e.dashLen=Object(n.bb)(p.dashlen,F.dashlen),e.dashGap=Object(n.bb)(p.dashgap,F.dashgap),r&&(e.tooltext=r=Object(n.Xa)(Object(n.Wa)(r,[3,40,41,42,43],{label:a,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:a},e._hoverAttrs={stroke:Re({color:c,alpha:h}).toString(),"stroke-width":d},e._defaultAttrs={stroke:Re({color:l,alpha:s}).toString(),"stroke-width":i},e.type="line",e.onclick=w(e.eventArgs),e.onmouseover=x(e.eventArgs),e.onmouseout=k(e.eventArgs),a&&(!(g=j.labelConfig)&&(g=j.labelConfig={}),g.type="text",g.text=a,g.align=Ae,g.valign=je,g.font=F.font,g.fillcolor=F.fontColor,g.bgcolor=F.labelBgColor,g.bordercolor=F.labelBorderColor,g.tooltext=e.tooltext))}draw(){let e,t,o,a,r,n,i,l=this,s=l.getFromEnv("chart"),c=l.config,h=s.getChildren("mapAnnotations")[0],d=l.components.markerObjs,g=s.config,p=g.markerOpts,b=g.scalingParams,u=s.config.annotationConfig,m=l.getFromEnv("toolTipController"),f=[],v=[],C={};for(a in this._drawConnectors(),l.imageLoadCount=0,l.imageCount=0,i=h.addGroup(Object.assign(u,{id:"markers",fillalpha:"100",items:f,scaleimages:1}),l),n=h.addGroup(Object.assign(u,{id:"markerLabels",items:v,scaleimages:1}),l),g.labelsOnTop&&s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),l.components.markerGroup=i,l.components.markerLabelGroup=n,c.autoScale=p.autoScale?b.sFactor:1,d)e=null,(o=(t=d[a]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(o._annotationIndex=f.length,C[a]=t,t.markerShape=e.markerShape&&h.addItem(i.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),!0,l),(r=t.markerShape&&t.markerShape.getElement())&&m.enableToolTip(r,t.config.tooltext),f.push(t.markerShape),t.markerLabel=e.markerLabel&&h.addItem(n.getId(),Object.assign({animationLabel:"markerItem"},e.markerLabel),!0,l),v.push(t.markerLabel));l.addJob("buildKdtree",l._buildKdTree.bind(l),y.b.kdTree)}_buildKdTree(){let e,t,o=this,a=o.components.kdArrayMap,r=o.components.markerGroup,n=[],i=r&&r.items,l=i&&i.length||0;for(t=0;t<l;t++)a[e=i[t].config.id]&&n.push(a[e]);o.components.kDTree||(o.components.kDTree=new fe(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(n)}_drawMarkerItem(){let e,t,o,a,r,i,l,s,c,h,d,g,b,u,m,f,v,y,C,O,x=this,k=x.dataset,w=k.getFromEnv("chart"),F=w.config,j=k.config,A=F.scalingParams,L=x.config,S=L.options,E=L.definition,_=F.markerOpts,I=_.dataLabels.style,T=S.shapeid,P=S.scale||1,R=S.label||Oe,M=w.config.scalingParams.scaleFactor*w.config.baseScaleFactor,B=(S.labelpos||xe).toLowerCase(),D=L.formattedValue===ve?ve:L.formattedValue,Z=S.tooltext||_.tooltext,V=Object(n.bb)(E.radius,L.radius,_.radius)*P*j.autoScale||1e-4,N=L.fillColor,G=L.fillAlpha,H=L.fillRatio,W=L.fillAngle,z=L.borderThickness,X=L.borderColor,K=L.borderAlpha,Y=k.components.kdArrayMap||(k.components.kdArrayMap={}),J=x.config.id;if(L.autoScale=_.autoScale?M:1,T)return Z=Z?Object(n.Xa)(Object(n.Wa)(Z,[1,2,3],{formattedValue:D,label:R},S)):D?R+_.tooltipSepChar+D:R,D!==ve&&null!==D?R=R+_.labelSepChar+D:isNaN(P)?P=1:0>P?P=0:5<P&&(P=5),Object(n.T)(S,{x:S.x&&S.x.toString(),y:S.y&&S.y.toString(),fillcolor:N,fillalpha:G,fillratio:H,fillangle:W,borderthickness:z,bordercolor:X,borderalpha:K,hovereffect:Object(n.Za)(_.showHoverEffect),radius:V&&V.toString(),link:S.link,showshadow:Object(n.bb)(S.showshadow,L.shadow),_markerLabel:R,_markerId:S.id,id:(S.id+Oe).toLowerCase()}),delete S.tooltext,L.tooltext=!!_.showTooltip&&Z,m=+S.x*A.sFactor+A.translateX,f=+S.y*A.sFactor+A.translateY,V=S.radius,"triangle"===T?(Object(n.T)(S,{type:"polygon",sides:3,startangle:_.startAngle}),O="polygon",C=3):"diamond"===T?(Object(n.T)(S,{type:"polygon",sides:4,startangle:_.startAngle}),O="polygon",C=4):"arc"===T?(y=V*Le,Object(n.T)(S,{type:"arc",startangle:0,endangle:360,innerradius:y}),O="arc"):"circle"===T?(S.type="circle",O="circle"):(d=k.getShapeArgs.call(x),_.dataEnabled&&_.valueToRadius&&S.radius!==ve?delete d.radius:(!d.radius&&(d.radius=_.radius),d.radius*=P*L.autoScale),Object(n.T)(S,d),S.id=S._markerId&&S._markerId.toLowerCase(),y=d.innerradius,d.radius&&(V=d.radius),O=d.type&&d.type.toLowerCase(),C=d.sides||5,(V=+V)&&y&&V<y&&(u=V,S.radius=V=y,S.innerradius=y=u)),S.type=S.type&&S.type.toLowerCase(),Object(n.T)(S,{hoverfillcolor:Object(n.Za)(S.fillhovercolor,_.hoverFillColor,S.fillcolor),hoverfillalpha:Object(n.Za)(S.fillhoveralpha,_.hoverFillAlpha,S.fillalpha),hoverfillratio:Object(n.Za)(S.fillhoverratio,_.hoverFillRatio,S.fillratio),hoverfillangle:Object(n.Za)(S.fillhoverangle,_.hoverFillAngle,S.fillangle),hoverborderthickness:Object(n.bb)(S.borderhoverthickness,_.hoverBorderThickness,S.borderthickness),hoverbordercolor:Object(n.Za)(S.borderhovercolor,_.hoverBorderColor,S.bordercolor),hoverborderalpha:Object(n.Za)(S.borderhoveralpha,_.hoverBorderAlpha,S.borderalpha)}),g={alpha:S.fillalpha,color:S.fillcolor,angle:360-S.fillangle,ratio:S.fillratio},b={alpha:S.hoverfillalpha,color:S.hoverfillcolor,angle:360-S.hoverfillangle,ratio:S.hoverfillratio},S._defaultattrs={fill:Object(n.mb)(g),"stroke-width":"0"===S.showborder?0:S.borderthickness,stroke:Object(p.c)(S.bordercolor,S.borderalpha)},S._hoverattrs={fill:Object(n.mb)(b),"stroke-width":"0"===S.showborder?0:S.hoverborderthickness,stroke:Object(p.c)(S.hoverbordercolor,S.hoverborderalpha)},"image"===S.type?(S.borderthickness=S.borderthickness||0,S.onload=function(e){let t=this.config,o=e.width,a=e.height,r={},n=(+t.x-o/(2*A.sFactor))*A.sFactor,i=(+t.y-a/(2*A.sFactor))*A.sFactor;(r=Y[J]||(Y[J]={})).x=n+A.translateX,r.y=i+A.translateY,r.element=x,r.shapeInfo={type:"rect",width:o,height:a},o&&a&&this.getElement().attr({x:n,y:i,width:o,height:a}),k.imageLoadCount++,k.imageLoadCount===k.imageCount&&k._buildKdTree()},S.onerror=function(){k.imageLoadCount++,k.imageLoadCount===k.imageCount&&k._buildKdTree()},k.imageCount++):((v=Y[J]||(Y[J]={})).x=m,v.y=f,v.element=x,v.shapeInfo={type:O,sides:C,radius:+V+S.borderthickness/2,innerradius:y}),L.drawOptions.shape=S,_.showLabels?(t=(e=k._getLabelOptions(B,h=S.labelpadding||_.labelPadding,S)).align,o=e.valign,r=L._labelBaseHeight,l=L._labelYOffset,s=_.labelWrapWidth?_.labelWrapWidth:k.getWrapWidth[t](a=L._labelBaseWidth,+e.x+(i=L._labelXOffset)),c=_.labelWrapHeight?_.labelWrapHeight:k.getWrapHeight[o](r,+e.y+l),s>h&&(s-=h),c>h&&(c-=h),L.drawOptions.label=Object(n.T)({type:"text"},{text:R,tooltext:S.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:s,wrapheight:c,fontsize:I.fontSize/A.sFactor,font:I.fontFamily,fillcolor:I.fontColor}),{markerShape:S,markerLabel:L.drawOptions.label}):{markerShape:S}}getHoverFn(){let e=this.getFromEnv("chart");return function(){let t,o,a=this.data("marker"),r=a.markerShape,i=r.unfilteredConfig,l=i._markerEventArgs,s=r.getElement(),c=s.getBBox(),h=a.config;s&&i.hovereffect&&("circle"===r.config.type&&(o={color:i.hoverfillcolor,alpha:i.hoverfillalpha,angle:360-i.hoverfillangle,ratio:i.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===r.config.rawFillPattern},i._hoverattrs.fill=Object(n.mb)(o)),t=Object(n.T)({},i._hoverattrs),"image"===s.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),s.attr(t)),l||(l=i._markerEventArgs={x:c.x,y:c.y,scaledX:c.x/r.groupConfig.scaleX,scaledY:c.y/r.groupConfig.scaleY,chartX:c.x+c.width/2,chartY:c.y+c.height/2,id:i.id,label:i.label}),Object(g.e)(h.options.id,"markerRollOver",l,e.getFromEnv("chartInstance"),h,ve,ve,ve)}}getHoverOutFn(){let e=this.getFromEnv("chart");return function(){let t,o=this.data("marker"),a=o.markerShape,r=a.getElement(),i=o.config;r&&a.unfilteredConfig.hovereffect&&("circle"===a.config.type&&(a.unfilteredConfig._defaultattrs.fill=Object(n.mb)({alpha:a.config.rawAlpha,color:a.config.rawColor,angle:360-a.config.rawAngle,ratio:a.config.rawRatio,radialGradient:"radial"===a.config.rawFillPattern})),t=Object(n.T)({},a.unfilteredConfig._defaultattrs),"image"===r.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),r.attr(t)),Object(g.e)(i.id,"markerRollOut",a.unfilteredConfig._markerEventArgs,e.getFromEnv("chartInstance"),ve,ve,ve)}}getClickFn(){let e=this;return function(t){let o=this.data("marker"),a=o.config.options,r=e.getFromEnv("chart"),n=o.markerShape,i=n.config,l=this.getBBox(),s=i._markerEventArgs;s||(s=i._markerEventArgs={x:l.x,y:l.y,scaledX:l.x/n.groupConfig.scaleX,scaledY:l.y/n.groupConfig.scaleY,chartX:l.x+l.width/2,chartY:l.y+l.height/2,id:a.id,label:a.label}),r.fireChartInstanceEvent("markerClick",s,t)}}highlightPoint(e){let t,o,a,r,n,i,l,s,c,h,d=e.element,g=this,p=g.getFromEnv("chart"),b=p.graphics,u=g.getFromEnv("animationManager"),m=b.trackerElems||(b.trackerElems={}),f=e.shapeInfo,v=g.getFromEnv("toolTipController"),y=e.x,C=e.y,O=p.config.lastHoveredPoint,x=!1;return!1===e?((o=m[t=O&&O.shapeInfo.type])&&o.hide(),void(p.config.lastHoveredPoint=null)):(a={fill:Pe,stroke:Pe},"circle"===(t=f.type)&&(t="polygon"),o=m[t],"polygon"===t?(n=f.startAngle,l=f.radius,!o&&(x=!0),o=b.trackerElems[t]=u.setAnimation({el:b.trackerElems[t]||"polypath",container:o,attr:Object.assign({polypath:[r=f.sides||1,y,C,l,n]},a),component:g,label:"markers"})):"rect"===t?(!o&&(x=!0),o=b.trackerElems[t]=u.setAnimation({el:b.trackerElems[t]||"rect",container:o,attr:Object.assign({x:y,y:C,width:i=f.width,height:c=f.height},a),component:g,label:"markers"})):"arc"===t&&(n=(360-d.markerShape.config.startAngle)*Te,l=f.radius,!o&&(x=!0),o=b.trackerElems[t]=u.setAnimation({el:b.trackerElems[t]||"ringpath",container:o,attr:Object.assign({ringpath:[y,C,l,s=d.markerShape.config.innerRadius,h=(360-d.markerShape.config.endAngle)*Te,n]},a),component:g,label:"markers"})),p.config.lastHoveredPoint=e,x&&o.click(g.getClickFn()).hover(g.getHoverFn(),g.getHoverOutFn()),o.show().data("marker",d),void v.enableToolTip(o,d.config.tooltext))}_drawConnectors(){let e,t,o,a,r,n,i,l,s=this,c=s.getFromEnv("chart"),h=c.config.annotationConfig,d=s.components.connectors||(s.components.connectors=[]),g=d.length,p=c.config.scalingParams,b=c.config.connectorOpts,u=b.showLabels,m=c.getChildren("mapAnnotations")[0],f=[],v=[],y=[];for(y.push({id:"connectorLabels",fillalpha:"100",items:v}),y.push({id:"connectors",fillalpha:"100",items:f}),m.addGroup(Object.assign(h,y[1]),s),m.addGroup(Object.assign(h,y[0]),s),t=0;t<g;t++)d[t]&&(a=(i=d[t].config.fromMarker.config).options.y,r=(l=d[t].config.toMarker.config).options.x,n=l.options.y,d[t].config.x=o=i.options.x,d[t].config.y=a,d[t].config.tox=r,d[t].config.toy=n,f.push(d[t].config),(e=m.addItem("connectors",Object.assign({animationLabel:"markerItem"},d[t].config),!0,s)).addEventListener("mouseover",d[t].config.onmouseover),e.addEventListener("mouseout",d[t].config.onmouseout),e.addEventListener("click",d[t].config.onclick),d[t].labelConfig&&u&&(d[t].labelConfig.x=((+o+ +r)/2).toString(),d[t].labelConfig.y=((+a+ +n)/2).toString(),d[t].labelConfig.fontsize=b.fontSize/(p.scaleFactor*c.config.baseScaleFactor),v.push(d[t].labelConfig),m.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},d[t].labelConfig),!0,s)))}getShapeArgs(){let e,t=this.config,o=Object(n.T)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(o.radius=e=(o.radius||t.markerRadius)*t.autoScale,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||e*Le),o):null}_getLabelOptions(e,t,o,a,r){let n,i,l,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),i=+o.x,l=+o.y,n=a===ve||r===ve?o.radius||0:/^(top|bottom)$/gi.test(s)&&.5*r||/^(left|right)$/gi.test(s)&&.5*a||0,this.getLabelAlignment[s](i,l,n=+n+ +t)}addMarkerItem(e){let t,o,a,r,i,l,s=this,c=s.getFromEnv("chart"),h=e,d=s.components.markerObjs,g=s.components.shapeObjs,p=s.components.markerGroup,b=s.components.markerLabelGroup,u=c.getChildren("mapAnnotations")[0],m=s.getFromEnv("number-formatter"),f=c.config.markerOpts;if(l=h.id.toLowerCase()){if(d[l])return;delete h.value,s.imageLoadCount=0,(t=Be._initializeMarkerItem(l,h,null)).dataset=s,i=t.config.options.shapeid,(a=t.config).cleanValue=m.getCleanValue(r=h.value),e=a.options,a.formattedValue=null===a.cleanValue?ve:m.dataLabels(r),a.fillColor=Object(n.Za)(e.fillcolor,e.color,f.fillColor),a.fillAlpha=Object(n.Za)(e.fillalpha,e.alpha,f.fillAlpha),a.fillRatio=Object(n.Za)(e.fillratio,f.fillRatio),a.fillAngle=Object(n.Za)(e.fillangle,f.fillAngle),a.borderThickness=Object(n.bb)(e.borderthickness,f.borderThickness),a.borderColor=Object(n.Za)(e.bordercolor,f.borderColor),a.borderAlpha=Object(n.Za)(e.borderalpha,f.borderAlpha),a.labelPadding=e.labelpadding||f.labelPadding,a.options.tooltext=Object(n.Za)(e.tooltext,f.tooltext),a.link=e.link,i&&(t.shapeObj=g[i&&i.toLowerCase()]),d[l]=t,o=s._drawMarkerItem.call(t),p&&b&&(t.markerShape=o.markerShape&&u.addItem(p.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},o.markerShape),!0,s),t.markerLabel=o.markerLabel&&u.addItem(b.getId(),Object.assign({animationLabel:"markerItem"},o.markerLabel),!0,s)),s._buildKdTree()}}updateMarkerItem(e,t){let o,a,r,i,l=this,s=l.getFromEnv("chart"),c=s.getChildren("mapAnnotations")[0],h=s.config.markerOpts,d={},g=l.components.markerObjs[e];if(g){for(a in o=g.config.options,Object(n.T)(o,t),l.imageLoadCount=0,r=g.config,t)d[a.toLowerCase()]=t[a]&&t[a].toString();r.fillColor=Object(n.Za)(d.fillcolor,d.color,h.fillColor),r.fillAlpha=Object(n.Za)(d.fillalpha,d.alpha,h.fillAlpha),r.fillRatio=Object(n.Za)(d.fillratio,h.fillRatio),r.fillAngle=Object(n.Za)(d.fillangle,h.fillAngle),r.borderThickness=Object(n.bb)(d.borderthickness,h.borderThickness),r.borderColor=Object(n.Za)(d.bordercolor,h.borderColor),r.borderAlpha=Object(n.Za)(d.borderalpha,h.borderAlpha),r.labelPadding=d.labelpadding||h.labelPadding,r.options.tooltext=Object(n.Za)(d.tooltext,h.tooltext),r.link=d.link,i=l._drawMarkerItem.call(g).markerShape,l._buildKdTree(),c.update(e,i)}}_removeMarkerItem(e){let t,o,a=this.components,r=a.markerObjs,n=r[e],i=a.kdArrayMap;n&&(o=n.markerLabel,(t=n.markerShape)&&t.dispose(),o&&o.dispose(),delete i[e],this._buildKdTree()),delete r[e]}getElement(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}var De=Be;Object(m.a)({name:"mapsAnimation",type:"animationRule",extension:v});var Ze=function(e){var t,o=e.getFromEnv("dataSource"),a=o.data||{},r=o.markers;Object(n.M)(e,class extends c.a{getType(){return"group"}getName(){return"mapGroup"}configure(){this._mapChildren(e=>{e.configure&&e.configure()})}createContainer(){let e,t=this,o=t.getLinkedParent(),a=t.getFromEnv("animationManager");e=o.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",a.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",a.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}_transformGroup(){let e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),a=e.getFromEnv("animationManager"),r=e.getChildContainer("plot"),i=e.getChildContainer("plotShadow"),l=t.config.scalingParams;r.hide(),i.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),n.Ia&&(r&&a.setAnimation({el:r,attr:{transform:l.transformStr},component:e,label:"group"}),i&&a.setAnimation({el:i,attr:{transform:l.transformStr},component:e,label:"group"})),r.show(),i.show()}),t.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(e){let t,o=1/0,a=-1/0,r=0,n=function(e){a=Math.max(a,e.max),o=Math.min(o,e.min)};return this._mapChildren(o=>o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),n(t))):(r++,t=o.getDataLimits(e),void n(t))),this.setState("visible",!!r),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:a,min:o}}},"mapGroup"),t=e.getChildren("mapGroup")[0],Object(n.Q)(t,ae,"entities",1,[a]),r?Object(n.Q)(t,De,"markers",1,[r]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},Ve=o("KmlC");let Ne=(e,t,o)=>{var a,r,n=Math.round,i=e.value,l=e.code,s=Object(p.a)(l),c=t.value,h=t.code,d=Object(p.a)(h);return r=[n(s[0]+(d[0]-s[0])/(a=c-i)*(o-i)),n(s[1]+(d[1]-s[1])/a*(o-i)),n(s[2]+(d[2]-s[2])/a*(o-i))],Object(p.b)(r)};function Ge(e){return Object(p.j)(e||We)||We}let He="rgba(192,192,192,"+(n.Oa?.002:1e-6)+")",We="#000000",ze=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(n.mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:He,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:He,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var a,r,i,l,s,c,h,d,g,b,u,m,f=Math.max,v=Math.min,y={},C=e.getFromEnv("number-formatter"),O=e.getFromEnv("dataSource"),x=O.dataset,k=O.data;if(o=o||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==o.min&&void 0!==o.max?"HeatMap"===e.getName()&&(void 0===o.min||void 0===o.max)&&(o={min:1/0,max:-1/0},x.forEach(e=>{e.data&&e.data.forEach(e=>{o.min=v(o.min,Object(n.bb)(e.value,o.min)),o.max=f(o.max,Object(n.bb)(e.value,o.max))})})):(o={min:1/0,max:-1/0},k&&k.forEach(e=>{o.min=v(o.min,Object(n.bb)(e.value,o.min)),o.max=f(o.max,Object(n.bb)(e.value,o.min))})),y.mapByPercent=u=!!Object(n.bb)(t.mapbypercent,0),a=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===o.min?0:u?0:o.min),void 0===t.maxvalue&&(t.maxvalue=void 0===o.max?100:u?100:o.max),(t.maxvalue===t.minvalue||o.min===1/0||o.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),m=!1,s=0,h=a.length;s<h;s++)if(a[s].maxvalue){m=!0;break}for(m||(a=[]),i=t.code,d=y.colorRange=[],y.gradient=!!Object(n.bb)(t.gradient,1),a.length?i=Ge(i):(i?(l=Ge(i),i=Ge()):l=function(e){return Object(p.h)(e,1)}(i=Ge()),a.push({code:l,maxvalue:t.maxvalue,label:void 0})),function(t){var o,a,r,n=e.getFromEnv("number-formatter");for(o=0,a=t.length;o<a;o++)(r=t[o].maxvalue)&&(t[o].maxvalue=n.getCleanValue(r))}(a),a=a.sort(function(e,t){return e.maxvalue-t.maxvalue}),g=b=t.minvalue&&C.getCleanValue(t.minvalue),b=(void 0!==g||null!==g)&&(u?g+"%":C.legendValue(g)),d.push({code:Object(n.R)(i),value:g,displayValue:b,label:t.startlabel}),s=0,h=a.length;s<h;s++)c=Ge((r=a[s]).code||r.color),g=b=r.maxvalue,!isNaN(parseInt(g,10))&&(b=(void 0!==g||null!==g)&&(u?g+"%":C.legendValue(g)),d.push({code:Object(n.R)(c),value:g,displayValue:b,label:r.label||r.displayvalue}));return d[d.length-1].label=t.endlabel||r.label,y},getDefaultConf:function(e){return t[e]}}}();var Xe=function(e){!function(e){let t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new class extends c.a{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,o,a=this,r=this.getFromEnv("chart"),i="maps"===r.defaultDatasetType,l="TreeMap"===r.getName(),s=this.getFromEnv("dataSource").chart.mapbycategory,h=r.getFromEnv("number-formatter"),d=r.config.showLegend,g=r.getChildren("colorRange")&&r.getChildren("colorRange")[0];r.addToEnv("colorManager",a),a.datasource=r.getFromEnv("dataSource"),e=a.datasource.colorrange,g&&g.remove({instant:!0}),d||(a.config.legendItemIds=[]),"gradient"==(t=i?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":l?"gradient":e.gradient&&"0"!=e.gradient&&!+s?"gradient":"icon")?(ze.init({chart:r}),o=ze.legacyDataParser(e),Object(n.M)(r,class extends c.a{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let t,o,a,r=this;for(r.data=e,r.appender="",a=r.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),r.valueRatio=void 0,r.values=[],t=0,o=a.length;t<o;t++)r.values.push(a[t].value)}getValueRatio(){var e,t,o=this.colorRange,a=o.length,r=this.valueRatio,n=o[a-1].value,i=o[0].value,l=0;if(r)return r;for(r=this.valueRatio=[],e=0;e<a;e++)r.push(100*((t=(o[e].value-i)/(n-i))-l)),l=t;return r}getCumulativeValueRatio(){var e,t=this.colorRange,o=t.length,a=t[0].value,r=t[o-1].value,n=[];for(e=0;e<o;e++)n.push((t[e].value-a)/(r-a)*100);return n}getBoxFill(e){var t,o,a,r=this.colorRange,i=r.length,l=[];for(a=e?90:0,t=0;t<i;t++)l.push(r[t].code);return o={FCcolor:{alpha:"100,100,100",angle:a,color:l.join(","),ratio:this.getValueRatio().join(",")}},Object(n.mb)(o)}getColorByValue(e){var t,o,a,r,n=this.values,i=this.colorRange;if(void 0!==e&&null!==e){for(o=0,t=n.length;o<t;o++){if(e===n[o]){r=i[o].code;break}if(!o&&e<n[o]){a=!0;break}if(o===t-1&&e>n[o]){a=!0;break}if(e>n[o]&&e<n[o+1]){r=Ne(i[o],i[o+1],e);break}}return a?void 0:r}}},"colorRange",1,[o]),g=r.getChildren("colorRange")[0],r.addToEnv("colorRange",g),o||(g._dontPlot=!0),a.config.legendItemIds=[],a._configureGradientLegend(g)):"icon"===t?(Object(n.M)(r,class extends c.a{constructor(){super();let e=this;e.mapByCategory=!1,e.colorArr=[],e.noValidRange=!0,e.sortLegend=!1}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}getType(){return"colorComponent"}getName(){return"colorBucket"}configure(e){if(!e)return;let t,o,a,r,i,l,s,c,h,d,g,p=this,b=p.mapByCategory,u=e.numberFormatter,m=e.colorRange||{},f=Object(n.T)([],m.color),v=this.getLinkedParent(),y=p.getFromEnv("dataSource"),C=Math.min(Math.max(Object(n.bb)(y.chart.palette,0)-1,0),4),O=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[C],x=Object(n.bb)(u.getCleanValue(m.maxvalue),1/0),k=Object(n.bb)(u.getCleanValue(m.minvalue),-1/0),w=p.colorArr;if(void 0!==e.mapByCategory&&(b=p.mapByCategory=!!+e.mapByCategory),(f=f.filter(b?e=>e.code||e.color:e=>e.minvalue||e.maxvalue)).forEach(e=>{e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(d=u.getCleanValue(e.minvalue),h=u.getCleanValue(e.maxvalue),e.rangeLabel=u.dataLabels(d)+"-"+u.dataLabels(h)):(d=u.getCleanValue(e.minvalue),e.maxvalue=h=x,e.rangeLabel=h===1/0?">"+u.dataLabels(d):u.dataLabels(d)+"-"+u.dataLabels(h)):(e.minvalue=d=k,h=u.getCleanValue(e.maxvalue),e.rangeLabel=d===-1/0?"<"+u.dataLabels(h):u.dataLabels(d)+"-"+u.dataLabels(h))}),f.sort((e,t)=>+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue),f&&(t=f.length)){for(w.length=0,o=0;o<t;o+=1)s=f[o],a=Object(n.Za)(s.color,s.code,O&&O[o]),r=Object(n.Za)(s.alpha),l=Object(n.Za)(s.bordercolor),i=Object(n.Za)(s.borderalpha,100),h=Object(n.bb)(s.maxvalue),d=Object(n.bb)(s.minvalue),g=Object(n.Za)(s.label,s.displayvalue,s.rangeLabel),(a&&h>=d||b&&g)&&w.push({code:a,alpha:r||"100",oriAlpha:r,maxvalue:h,minvalue:d,label:Object(n.Xa)(g),labelId:g.toLowerCase(),bordercolor:l,borderAlpha:i,name:s.name});p.sortedColorArr=p.colorArr.slice(0)}else p.noValidRange=!0,p.colorArr=[],p.sortedColorArr=[]}getColorObj(e){if(void 0===e)return{outOfRange:!0};let t,o=this,a=o.sortedColorArr,r=o.gradient?1:0,i=a[r];if(o.mapByCategory){for(e=Object(n.Xa)(e).toLowerCase()||e.toString().toLowerCase();i;){if(i.labelId===e||i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,legendItemId:i.legendItemId};i=a[r+=1]}return{outOfRange:!0}}if(o.gradient){if(o.scaleMin<=e&&o.scaleMax>=e){for(;i&&i.maxvalue<e;)i=a[r+=1];return{code:function(e,t,o){let a=e[0],r=e[1],n=e[2],i=a+(t[0]-a)*o,l=r+(t[1]-r)*o,s=n+(t[2]-n)*o;return{hex:("#000000"+(i<<16|l<<8|s).toString(16)).slice(-6),rgb:[i,l,s]}}(a[r-1].codeRGB,i.codeRGB,t=(e-i.minvalue)/i.range).hex}}return{outOfRange:!0}}for(;i;){if(e<i.minvalue)return 0==r?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}:{code:a[r-1].code,alpha:a[r-1].alpha||"100",oriAlpha:a[r-1].oriAlpha,seriesIndex:r,name:a[r-1].name,label:a[r-1].label,outOfRange:!0,bordercolor:a[r-1].bordercolor,borderalpha:a[r-1].borderAlpha};if(e>i.maxvalue&&r==a.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};i=a[r+=1]}return a.length?void 0:{outOfRange:!0}}getColorRangeArr(e,t){var o,a,r,i,l,s,c,h,d=this.colorArr,g=[];if(!this.defaultAsigned&&(e>t&&(o=e,e=t,t=o),e<t&&(i=this.getColorObj(e),s=this.getColorObj(t),i&&s))){for(l=e,a=i.seriesIndex,r=s.seriesIndex;a<=r;a+=1)(c=Object(n.T)({},d[a])).minvalue!==l&&(c.minvalue=l),g.push(c),h=c,l=c.maxvalue;h&&(h.maxvalue=t)}return g}},"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(n.bb)(s,0),defaultColor:"cccccc",numberFormatter:h}]),r.addToEnv("colorRange",r.getChildren("colorRange")[0]),d&&a._addLegendItems()):"none"===t&&(r.deleteFromEnv("colorManager"),a.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},o))}_addLegendItems(){let e,t,o,a,r,i=this,l=i.config,s=i.getFromEnv("chart"),c=s.getChildren("legend")[0],h=s.getFromEnv("colorRange").colorArr,d=h.length;for(a=0;a<d;a++)r={label:Object(n.Za)(h[a].label,h[a].displayvalue),datasetObj:h[a],index:a},t=Object(p.h)(h[a].code,40),e={FCcolor:{color:h[a].code+","+h[a].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=c.getItem(l.legendItemIds[a]))||(l.legendItemIds.push(c.createItem(i)),(o=c.getItem(l.legendItemIds[a])).addEventListener("click",o.itemClickFn)),o.removeLegendState("hidden"),h[a].legendItemId=o&&o.getId(),o.configure(r),o.setStateCosmetics("default",{symbol:{fill:Object(n.mb)(e),rawFillColor:h[a].code}});for(a=d;a<l.legendItemIds.length;a++)c.disposeItem(l.legendItemIds[a]);l.legendItemIds.splice(d)}legendInteractivity(e){let t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}getColor(e){let t=this;return!+t.datasource.chart.mapbycategory&&+t.datasource.colorrange.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}},e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)};let Ke,Ye,Je,Ue,qe={},Qe="rgba(192,192,192,"+(n.Oa?.002:1e-6)+")",$e="#000000",et={}.hasOwnProperty;function tt(e,t){return function e(t,o){var a,r;for(r in t)et.call(t,r)&&(a=t[r],o[r]===Ke?o[r]=a:"object"==typeof a&&null!==a&&e(a,o[r]))}(e,t),t}function ot(e){return Object(p.j)(e||$e)||$e}function at(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function rt(e){return!(e!==Ke&&void 0!==e&&null!==e&&!isNaN(e))}var nt,it;qe.CAPTION="CAPTION",qe.LEGEND_BODY="LEGEND_BODY",qe.AXIS_LABEL="LEGEND_LABEL",qe.LEGEND_AXIS="LEGEND_AXIS",qe.RANGE="RANGE",qe.AXIS_VALUE="AXIS_VALUE",(it={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}}).legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(n.mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},it.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Qe,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Qe,stroke:"#FFFFFF"}}},it.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},Ye={init:function(e){nt=e.chart},legacyDataParser:function(e,t){var o,a,r,i,l,s,c,h,d,g,b,u,m,f={},v=nt.getFromEnv("number-formatter");if(!e)return!1;for(f.mapByPercent=b=!!Object(n.bb)(e.mapbypercent,0),o=e.color||[],e.minvalue===Ke&&(e.minvalue=t.min===Ke?0:b?0:t.min),e.maxvalue===Ke&&(e.maxvalue=t.max===Ke?100:b?100:t.max),u=!1,l=0,c=o.length;l<c;l++)if(o[l].maxvalue){u=!0;break}for(u||(o=[]),r=e.code,h=f.colorRange=[],f.gradient=!!Object(n.bb)(e.gradient,1),o.length?r=ot(r):(r?(i=ot(r),r=ot()):(m=r=ot(),i=Object(p.h)(m,1)),o.push({code:i,maxvalue:e.maxvalue,label:Ke})),function(e){var t,o,a,r=nt.getFromEnv("number-formatter");for(t=0,o=e.length;t<o;t++)(a=e[t].maxvalue)&&(e[t].maxvalue=r.getCleanValue(a))}(o),o=o.sort(function(e,t){return e.maxvalue-t.maxvalue}),d=g=e.minvalue&&v.getCleanValue(e.minvalue),g=(d!==Ke||null!==d)&&(b?d+"%":v.legendValue(d)),h.push({code:Object(n.R)(r),value:d,displayValue:g,label:e.startlabel}),l=0,c=o.length;l<c;l++)s=ot((a=o[l]).code||a.color),d=g=a.maxvalue,!isNaN(parseInt(d,10))&&(g=(d!==Ke||null!==d)&&(b?d+"%":v.legendValue(d)),h.push({code:Object(n.R)(s),value:d,displayValue:g,label:a.label||a.displayvalue}));return h[h.length-1].label=e.endlabel||a.label,f},getDefaultConf:function(e){return it[e]}};class lt{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,h,d,g,p,b,u,m,f,v,y,C,O,x,k,w,F=Math.max,j="bottom"===this.conf.legendPosition,A=this._lSpace,L=this.conf,S=L.padding,E=[],_=t.gLegend.getFromEnv("chartConfig"),I=[];if(A&&!o)return A.isImpure=!0,A;for(r=t.smartLabel,g=(a=t.colorRange).getCumulativeValueRatio(),n=a.colorRange,u=(A=this._lSpace={bound:{height:0,width:0},node:{logicArea:Ke,smartTexts:[]}}).node.smartTexts,h=tt(e,{}),f=this.getEffectivePlotArea(h),w=j?f.width:f.height,r.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),k=tt(L.style,{}),at(this._metaStyle=k),r.setStyle(k),v=r.getSmartText("W"),i=0,l=n.length;i<l;i++)(d=n[i].label)?I.push({oriIndex:i,label:d}):u[i]=Ke;if(0===(l=I.length))return{height:0,width:0};for(b=p=1<l?(g[I[l-1].oriIndex]-g[I[0].oriIndex])/2*w/100:F(g[I[0].oriIndex],100-g[I[0].oriIndex])/2*w/100,j?((O=r.getSmartText(I[0].label,b,f.height)).x=g[I[0].oriIndex]*f.width/100,s=O.x+O.width):((O=r.getSmartText(I[0].label,b,f.width)).y=g[I[0].oriIndex]*f.height/100,s=O.y+O.width),E.push(O.height),u[I[0].oriIndex]=O,j?((O=r.getSmartText(I[l-1].label,b,f.height)).x=g[I[l-1].oriIndex]*f.width/100,c=O.x-O.width):((O=r.getSmartText(I[l-1].label,b,f.width)).y=g[I[l-1].oriIndex]*f.height/100,c=O.y-O.width),E.push(O.height),u[I[l-1].oriIndex]=O,C=s,i=1;i<l-1;i++)d=I[i].label,x=I[i].oriIndex,O=Ke,y=g[I[i].oriIndex]*w/100,(p=Math.min(y-C,(i+1===l-1?c:g[I[i+1].oriIndex]*w/100)-y))>2*v.width&&(j?(O=r.getSmartText(d,p,f.height)).x=g[x]*f.width/100:(O=r.getSmartText(d,p,f.width)).y=g[x]*f.height/100,C=p,E.push(O.height)),u[I[i].oriIndex]=O;return m=F.apply(Math,E),j?(f.height=m,e.height=m+2*S.v):(f.width=m,e.width=m+2*S.v),A.node.logicArea=f,A.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,h,d,g="bottom"===this.conf.legendPosition,p=this.conf,b=p.bound&&p.bound.style||{stroke:"none"},u={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),d=i.animationManager,e=i.parentLayer,this.getLogicalSpace(a,i),s=(n=this._lSpace).node.logicArea,c=n.node.smartTexts,this.group=o=d.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:Ue}),this.bound=t=d.setAnimation({el:this.bound||"rect",attr:n.bound,css:b,container:o,component:Ue});for(let m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],l=0,h=c.length;l<h;l++)(r=c[l])&&(g?(u.y=s.y+r.height/2,u.x=l===h-1?s.x+r.x-r.width/2:l?s.x+r.x:s.x+r.x+r.width/2):(u.x=s.x+r.height/2,u.y=l===h-1?s.y+r.y-r.width/2:l?s.y+r.y:s.y+r.y+r.width/2),this.node.push(d.setAnimation({el:"text",attr:{text:r.text,x:u.x,y:u.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill,transform:g?"R0":"R270,"+u.x+","+u.y},container:o,component:Ue})));return{group:o,bound:t,node:this.node}}}class st{constructor(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=Ke,this.tracker=Ke,this.currPos=0,this.swing=[]}configure(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,o,a){var r,n,i,l,s,c,h=Math.ceil,d=a.parentLayer,g=a.animationManager,p=this.conf,b=p.outerCircle,u=p.innerCircle,m=h(b.rFactor*a.rCalcBase/2),f=h(u.rFactor*a.rCalcBase/2),v=m-f,y=this.sliderIndex;return p.outerRadius=m,p.innerRadius=f,this._scaleVal=t,u.style["stroke-width"]=v,f+=i=h(b.style["stroke-width"]/2),r=this.node=g.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:d,component:Ue}),"x"===a.key?(l=o,s=e,s+=y?-f:+f):(l=e,s=o,l+=y?-f:+f),this.oCircle=g.setAnimation({el:this.oCircle||"circle",attr:{cx:l,cy:s,r:m},css:b.style,container:r,component:Ue}),this.iCircle=g.setAnimation({el:this.iCircle||"circle",attr:{cx:l,cy:s,r:f},css:u.style,container:r,component:Ue}),c=this.tracker=g.setAnimation({el:this.tracker||"circle",attr:{cx:l,cy:s,r:m+5,fill:Qe,stroke:Qe,cursor:"pointer"},container:r,component:Ue}),r.attr({transform:"x"===a.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),Je.enableToolTip(c,t),this._dragAPI=n=this.getDragAPI("x"===a.key),c.undrag(),c.drag(n.dragging,n.dragStart,n.dragEnd),{translateAscending:m+i}}getDragAPI(e){var t,o,a,r,n=this,i=n.node,l=n.sliderIndex,s=n.rangeGroup,c=n.conf.innerRadius;return{dragging:function(h){var d,g,p,b,u;return h.stopPropagation(),h.preventDefault(),p=e?h.data[1]:h.data[0],l?(d=t[0]-t[1]+c,g=0):(d=0,g=t[1]-t[0]-c),(u=n.currPos+p)<d?p+=d-u:u>g&&(p-=u-g),i.attr({transform:e?"t0,"+(n.currPos+p):"t"+(n.currPos+p)+",0"}),o=p,a&&clearTimeout(a),a=setTimeout(function(){s.updateWhenInRest(n,n.currPos+p)},100),b=s.updateWhenInMove(n,n.currPos+p),n.tracker.data("__FC_tooltipText",b),r=!0,!0},dragStart:function(e){e.stopPropagation(),e.preventDefault(),t=n.swing,r=!1,s.dragStarted(n)},dragEnd:function(){s.dragCompleted(n,r,n.currPos+o),r&&(a&&clearTimeout(a),a=setTimeout(function(){s.updateWhenInRest(n,n.currPos)},100),n.currPos+=o,s.updateRange(n,t[+l]+n.currPos))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}var ct=o("3SBL"),ht=function(e){!function(e){let t,o=e.getFromEnv("dataSource").colorrange,a=e.getFromEnv("dataSource").chart.mapbycategory,r="maps"===e.defaultDatasetType,i="TreeMap"===e.getName(),l=e.getFromEnv("legend"),s=e.getFromEnv("gLegend");"gradient"==(t=o&&e.config.showLegend?r?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":i?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+a?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),l&&l.remove(),Object(n.M)(e,class extends c.a{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),Ue=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var e,t,o,a,r,i,l,s,c,h,d=this,g=d.getFromEnv("chart"),b=d.getFromEnv("dataSource").chart,u=d.conf={},m=b.outcnvbasefont,f=b.outcnvbasefontsize,v=b.outcnvbasefontcolor,y=g.config.dataLabelStyle;Ye.init({chart:g}),d.data=d.getFromEnv("dataSource").colorrange,d._dontPlot||(d.drawOptions={smartLabel:d.getFromEnv("smartLabel"),gLegend:d},d._dontPlot=!1,d._recalculateLogicalSpace=!0,Je=d.getFromEnv("toolTipController"),u.caption=Object(n.Za)(b.legendcaption),u.legendPosition=Object(n.Za)(b.legendposition,"bottom").toLowerCase(),u.showLegend=Object(n.bb)(b.showlegend,1),u.interactiveLegend=Object(n.bb)(b.interactivelegend,1),u.showLegendLabels=Object(n.bb)(b.showlegendlabels,1),e=b.legenditemfontcolor||v,t=b.legenditemfont||m,o=b.legenditemfontsize||f,a=Object(n.bb)(b.legenditemfontbold,0),r=b.legendcaptionfontcolor||v,i=b.legendcaptionfont||m,l=b.legendcaptionfontsize||f,s=Object(n.bb)(b.legendcaptionfontbold,1),h=(c=b.legendaxisbordercolor?Object(n.Ka)(Object(n.R)(b.legendaxisbordercolor)):Ke)?Object(n.bb)(b.legendaxisborderalpha,100)/100:Ke,u.axisTextItemConf={style:{fill:e?Object(p.c)(Object(n.Za)(e)):y.color,fontFamily:t?Object(n.Za)(t):y.fontFamily,fontSize:o?Object(n.bb)(o):y.fontSize.match(/\d+/)[0],fontWeight:a?"bold":y.fontWeight}},u.legendCaptionConf={style:{fill:r?Object(p.c)(Object(n.Za)(r)):y.color,fontFamily:i?Object(n.Za)(i):y.fontFamily,fontSize:l?Object(n.bb)(l):y.fontSize.match(/\d+/)[0],fontWeight:s?"bold":y.fontWeight,fontStyle:"normal"}},u.legendAxisConf={legendAxisHeight:11,style:{stroke:c,"stroke-opacity":h},line:{style:{stroke:Object(p.c)(Object(n.Za)(b.legendscalelinecolor,"FFF8E9"),Object(n.bb)(b.legendscalelinealpha,100)),"stroke-width":Object(n.bb)(b.legendscalelinethickness)}}},u.sliderGroupConf={showTooltip:Object(n.bb)(b.showtooltip,1),outerCircle:{rFactor:Object(n.bb)(b.sliderdiameterfactor),style:{stroke:Object(p.c)(Object(n.Za)(b.legendpointerbordercolor,"757575"),Object(n.bb)(b.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(n.bb)(b.sliderholediameterfactor),style:{stroke:Object(p.c)(Object(n.Za)(b.legendpointercolor,"FFFFFF"),Object(n.bb)(b.legendpointeralpha,100))}}},u.legendCarpetConf={spreadFactor:Object(n.bb)(b.legendspreadfactor),allowDrag:!!Object(n.bb)(b.legendallowdrag,0),captionAlignment:Object(n.Za)(b.legendcaptionalignment,"center"),style:{fill:Object(p.c)(Object(n.Za)(b.legendbgcolor,"e4d9c1"),Object(n.bb)(b.legendbgalpha,100)),stroke:Object(p.c)(Object(n.Za)(b.legendbordercolor,"c4b89d"),Object(n.bb)(b.legendborderalpha,100)),"stroke-width":Object(n.bb)(b.legendborderthickness,1)}})}postConfigureInit(){var e,t,o,a,r,i,l,s,c,h,d,g=this,p=g.conf;g.elem={},p.interactiveLegend?(a=tt(Ye.getDefaultConf("sliderGroupConf"),p.sliderGroupConf),this.sGroup?((o=g.elem.sGroup=this.sGroup).configure(a),g.elem.sGroup.gLegend=g):(this.sGroup=g.elem.sGroup=o=new class{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[!1]=new st(!1,t,this._id+"_0"),this.sliders[!0]=new st(!0,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[!1].configure(!1,t,this._id+"_0"),this.sliders[!0].configure(!0,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){this.extremes[+e.sliderIndex]=t}updateRange(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[!1].configure(!1,e,this._id+"_0"),this.sliders[!0].configure(!0,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,o){var a,r,n,i,l,s=Math.ceil,c=this.sliders,h=c[!1],d=c[!0],g=o.colorRange,p=g.colorRange,b=g.data.mapByPercent,u=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,a){this.getValueFormPixel=function(r){return e+(t-e)/(a-o)*r}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,a){var r,n=this.extremes;return r=this.getValueFormPixel(o.sliderIndex?n[1]-n[0]+a:a),t?parseFloat(r).toFixed(2)+"%":e.legendValue(r)}},this._drawParams=[e,t,o],this.updateWhenInMove(u,b),r=h.conf.outerCircle,n=s(h.conf.innerCircle.rFactor*o.rCalcBase/2),n+=s(r.style["stroke-width"]/2),this.extremes[0]=e+n,this.extremes[1]=t-n,i=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:p[0].value,this.max=this.max?this.max:p[p.length-1].value,h.currPos=i*(this.min-p[0].value)/(l=p[p.length-1].value-p[0].value),d.currPos=i*(this.max-p[0].value)/l-i,h.draw(e,b?u.legendPercentValue(this.min):u.legendValue(this.min),o[o.key],o),a=d.draw(t,b?u.legendPercentValue(this.max):u.legendValue(this.max),o[o.key],o),h.swing=this.extremes.slice(0),d.swing=this.extremes.slice(0),h.swing[1]+=d.currPos,d.swing[0]+=h.currPos,this.getValueFormPixel(p[0].value,p[p.length-1].value,this.extremes[0],this.extremes[1]),a}updateWhenInRest(e,t){var o,a,r=this.sliders,n=this.extremes,i=e.sliderIndex;i?(o=r[!i].currPos,a=n[1]-n[0]+t):(o=t,a=n[1]-n[0]+r[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(a).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,o=this.extremes,a=e.conf,r=this._fcChart;r.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:a.outerRadius,legendPointerWidth:a.innerRadius,outerRadius:a.outerRadius,innerRadius:a.innerRadius},[r.id])}dragCompleted(e,t,o){var a,r,n=this.sliders,i=this.extremes,l=e.conf,s=this.getValueFormPixel(n.false.currPos),c=this.getValueFormPixel(i[1]-i[0]+n.true.currPos),h=this._fcChart;e.sliderIndex?(a=s,r=this.getValueFormPixel(i[1]-i[0]+o)):(a=this.getValueFormPixel(o),r=c),t&&h.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:a,maxValue:r},[h.id]),h.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:a},{value:r}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[h.id])}dispose(){this.sliders[!1].dispose(),this.sliders[!0].dispose()}}(a),o.configure(a),g.elem.sGroup.gLegend=g)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(a=tt(Ye.getDefaultConf("legendCarpetConf"),p.legendCarpetConf)).legendPosition=p.legendPosition,d=Ye.getDefaultConf("legendBodyConf"),"bottom"===p.legendPosition?(g.drawOptions.refSideKey="canvasWidth",g.drawOptions.refOffsetKey="canvasLeft",r=tt(Ye.getDefaultConf("axisTextItemConf"),p.axisTextItemConf),d.legendPosition="bottom",(h=tt(Ye.getDefaultConf("legendAxisConf"),p.legendAxisConf)).legendPosition="bottom",r.legendPosition="bottom"):(g.drawOptions.refSideKey="canvasHeight",g.drawOptions.refOffsetKey="canvasTop",r=tt(Ye.getDefaultConf("axisTextItemConf"),p.axisTextItemConf),d.legendPosition="right",(h=tt(Ye.getDefaultConf("legendAxisConf"),p.legendAxisConf)).legendPosition="right",r.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new class{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=Ke,this.group=Ke,this._lSpace=Ke,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,o,a=this.conf,r=a.spreadFactor,n=e.refSide,i=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=a.width=n*r,o=e.maxOtherSide,i&&(s===Ke||null===s)&&(s=(l+n)/2-t/2)):(o=a.height=n*r,t=e.maxOtherSide,i&&(c===Ke||null===c)&&(c=(l+n)/2-o/2)),{width:t,height:o,x:s,y:c}}getPostCalcDecisionsH(e,t){var o,a=this.conf.padding,r=0;for(o in this.moveInstructions={},t)r+=t[o].height||0;e.height=r+2*a.v}getLogicalSpace(e,t){var o,a,r,n,i,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,h=this.compositionsByCategory,d=0,g={},p=0;if(l&&!t)return l.isImpure=!0,l;(rt((l=this._lSpace=a=this.getBoundingBox(e)).x)||rt(l.y)||rt(l.height)||rt(l.width))&&(this.autoRecalculate=!0),(r=tt(a,{})).height-=2*c.v,r.width-=2*c.h,r.x+=c.h,r.y+=c.v;for(let b=0;b<s.length;b++)(o=h[s[b]])&&((i=tt(r,{})).y+=d,i.height=(d=r.height*o.conf.spreadFactor)+p,n=o.getLogicalSpace(tt(i,{}),e,t),p=i.height-n.height,g[s[b]]=n,d=n.height);return this.getPostCalcDecisions(a,g),this._lSpace=a,a}setupDragging(){var e=this.group,t=0,o=0,a=0,r=0;e.css({cursor:"move"}),e.drag(function(n,i){e.attr({transform:"t"+(a+(t=n))+","+(r+(o=i))})},function(){a+=t,r+=o},n.kb)}draw(e){var t,o,a,r=this.conf,n=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,l=e.animationManager,s=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),a=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:Ue,container:s,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:a,css:r.style,component:Ue,container:t,label:"rect"});for(let c=0;c<n.length;c++)(o=i[n[c]])&&o.draw(r.captionAlignment,a,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return r.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var o,a,r,n=this.conf.padding,i=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(a in this.getPostCalcDecisionsH(e,t),t)i=i<(o=t[a].width)?o:i;for(a in e.width=i+2*n.h,t)(r=i-(o=t[a].width))&&(l[a]="t"+r/2+",0")}},this.components.LegendBody=new class{constructor(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=Ke,this.group=Ke,this.compositionsByCategory={},this._lSpace=Ke,this.SC_STACK=[qe.AXIS_LABEL,qe.LEGEND_AXIS,qe.AXIS_VALUE],this.DARW_STACK=[qe.AXIS_VALUE,qe.LEGEND_AXIS,qe.AXIS_LABEL]}configure(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,h=this._lSpace,d=this.conf.padding,g=this.compositionsByCategory,p=0;if(h&&!o)return h.isImpure=!0,h;for(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:Ke}},(i=tt(e,{})).height-=2*d.v,i.width-=2*d.h,i.x+=d.h,i.y+=d.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(a=g[this.SC_STACK[s]])&&(r=l(n,a.conf.spreadFactor),n=a.getLogicalSpace(tt(r,{}),t,o),p+=this.getSpaceTaken(n));return this.updateEffectivePlotArea(e,i,p),h.node.logicArea=i,h.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,h=this.childTextConf,d=this.conf.bound.style||{},g=this.compositionsByCategory;for(3<=arguments.length?(n=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(n,l),i=this._lSpace,this.group=r=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:h.style,container:t,component:Ue}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:d,container:r,component:Ue}),l.colorRange=this.colorRange,l.parentLayer=r,s=0,c=this.DARW_STACK.length;s<c;s++)(a=g[this.DARW_STACK[s]])&&a.draw(l);return l.moveInstructions&&r.attr({transform:l.moveInstructions}),{bound:o,group:r}}getCompositionPlotAreaFor(e){var t,o="bottom"===this.conf.legendPosition;return t=tt(e,{}),function(a,r){return a=a||{},o?(t.y+=a.height||0,t.height=e.height*r):(t.x+=a.width||0,t.width=e.width*r),t}}updateEffectivePlotArea(e,t,o){var a=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*a.v):(t.width=o,e.width=o+2*a.h)}},this.components.LegendAxis=new class{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=Ke,this.group=Ke,this.shadow=Ke,this.markerLine=Ke,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,o,a,r,n="bottom"===this.conf.legendPosition,i=arguments[0],l=this._lSpace,s=this.conf,c=s.padding,h=s.legendAxisHeight,d=this.compositionsByCategory,g=0;return l&&!arguments[2]?(l.isImpure=!0,l):(l=this._lSpace={bound:{height:0,width:0},node:{logicArea:Ke}},(r=tt(i,{})).height-=2*c.v,r.width-=2*c.h,r.x+=c.h,r.y+=c.v,e=h/2+s.line.offset,t=h/2,(a=d[qe.RANGE])&&(t+=g=Math.max(a.sliders.false.conf.outerCircle.rFactor*h/2-h/2,0)),n?(r.y+=g,r.height=o=t+e+g,i.height=o+2*c.v):(r.x+=g,r.width=o=t+e+g,i.width=o+2*c.v),l.node.logicArea=r,l.bound=i,i)}getDrawableAxisArea(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}preDrawingRangeParamV(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var o,a,r,n,i=tt(e,{}),l=this.conf.line,s="";for(i.x+=i.r,i.width-=2*i.r,n=i.y+i.height,o=0,a=t.length;o<a;o++)s+="M"+(r=i.x+t[o]*i.width/100)+","+(n-l.grooveLength)+"L"+r+","+(n+l.offset);return s+"M"+i.x+","+(n+l.offset)+"L"+(i.x+i.width)+","+(n+l.offset)}getColorGradientH(e){return{axis:e.getBoxFill(),shadow:Object(n.mb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,o,a,r,n,i,l,s,c,h,d,g,p,b=this.conf,u=b.line,m=(b.bound||{}).style||{},f=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],d=arguments[1]):1<=arguments.length&&(d=arguments[0]),g=d.animationManager,e=d.parentLayer,r=(a=d.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,d),h=this._lSpace,this.group=i=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:Ue}),this.bound=g.setAnimation({el:this.bound||"rect",attr:h.bound,css:m,component:Ue,container:i}),c=this.getDrawableAxisArea(h.node.logicArea),s=this.getColorGradient(a),b.style.fill=s.axis,b.shadow.style.fill=s.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:c,css:b.style,container:i,component:Ue}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:c,css:b.shadow.style,container:i,component:Ue}),p=this.getScaleMarkerPathStr(c,r),this.path=g.setAnimation({el:this.path||"path",attr:{path:p},css:u.style,container:i,component:Ue}),f)n=f[o],o===qe.RANGE&&(d[(l=this.preDrawingRangeParam(c)).prop]=l[l.prop],d.key=l.prop,d.rCalcBase=l.calculationBase,d.parentLayer=i,n.draw(l.rangeStart,l.rangeEnd,d))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var o,a,r,n,i=tt(e,{}),l=this.conf.line,s="";for(i.y+=i.r,i.height-=2*i.r,r=i.x+i.width,o=0,a=t.length;o<a;o++)s+="M"+(r-l.grooveLength)+","+(n=i.y+t[o]*i.height/100)+"L"+(r+l.offset)+","+n;return s+"M"+(r+l.offset)+","+i.y+"L"+(r+l.offset)+","+(i.y+i.height)}getColorGradientV(e){return{axis:e.getBoxFill(!0),shadow:Object(n.mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}},this.components.LegendValues=new class extends lt{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,h,d,g,p,b,u,m,f,v,y,C,O,x,k,w,F,j,A=Math.min,L=Math.max,S="bottom"===this.conf.legendPosition,E=this._lSpace,_=this.conf,I=_.padding,T=t.gLegend.getFromEnv("chartConfig"),P=[],R=[];if(E&&!o)return E.isImpure=!0,E;for(r=t.smartLabel,n=(a=t.colorRange).colorRange,c=a.getCumulativeValueRatio(),j=(E=this._lSpace={bound:{height:0,width:0},node:{logicArea:Ke,smartTexts:[]}}).node.smartTexts,(O=tt(e,{})).height-=2*I.v,O.width-=2*I.h,O.x+=I.h,O.y+=I.v,r.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),F=tt(_.style,{}),at(this._metaStyle=F),r.setStyle(F),w=r.getSmartText("W"),s=n.length,S?(g=h=(c[s-1]-c[0])/2*O.width/100,(i=r.getSmartText("string"!=typeof(k=n[0].displayValue)&&k!==Ke&&k.toString()||k,g,O.height)).x=c[0]*O.width/100,p=i.x+i.width,P.push(i.height)):(g=h=(c[s-1]-c[0])/2*O.height/100,(i=r.getSmartText(n[0].displayValue,O.width,g)).y=c[0]*O.height/100,m=i.y+i.width,R.push(i.width)),j[0]=i,S?((i=r.getSmartText(n[s-1].displayValue,g,O.height)).x=c[s-1]*O.width/100,u=i.x-i.width,P.push(i.height),b=p):((i=r.getSmartText(n[s-1].displayValue,O.width,g)).y=c[s-1]*O.height/100,v=i.y-i.height,R.push(i.width),f=m),j[s-1]=i,l=1;l<s-1;l++)i=Ke,x=n[l].displayValue,S?(h=A((d=c[l]*O.width/100)-b,(l+1===s-1?u:c[l+1]*O.width/100)-d))>1.5*w.width&&((i=r.getSmartText(x,2*h,O.height)).x=c[l]*O.width/100,b=h,P.push(i.height)):(h=A((d=c[l]*O.height/100)-f,(l+1===s-1?v:c[l+1]*O.height/100)-d))>2*w.height&&((i=r.getSmartText(x,O.width,2*h)).y=c[l]*O.height/100,f=h,R.push(i.width)),j[l]=i;return S?(y=L.apply(Math,P),O.height=y,e.height=y+2*I.v):(C=L.apply(Math,R),O.width=C,e.width=C+2*I.h),E.node.logicArea=O,E.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,h,d,g,p=this.conf,b="bottom"===p.legendPosition,u=p.bound&&p.bound.style||{stroke:"none"},m={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,l=i.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(a,i),n=(r=this._lSpace).node.logicArea,h=r.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:Ue}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:r.bound,css:u,container:o,component:Ue});for(let f=0;f<this.node.length;f++)this.node[f].remove();for(this.node=[],s=0,c=l.length;s<c;s++)(d=h[s])&&(b?(m.y=n.y+d.height/2,m.x=s===c-1?n.x+d.x-d.width/2:s?n.x+d.x:n.x+d.x+d.width/2):(m.x=n.x+d.width/2,m.y=s===c-1?n.y+d.y-d.height/2:s?n.y+d.y:n.y+d.y+d.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:d.text,x:m.x,y:m.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill},container:o,component:Ue})));return{group:o,bound:t}}},p.showLegendLabels&&(this.components.LegendLabels=new lt)),t=this.components.LegendAxis,s=this.components.LegendValues,e=this.components.LegendCarpet,i=this.components.LegendBody,p.showLegendLabels&&(l=this.components.LegendLabels),this.components.LegendCarpet.configure(a),this.components.LegendValues.configure(r),this.components.LegendAxis.configure(h),this.components.LegendBody.configure(g.drawOptions.colorRange,d,r),p.showLegendLabels&&l.configure(r),p.caption?(c=tt(Ye.getDefaultConf("legendCaptionConf"),p.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(p.caption,c):(this.componentCaption=new class{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=Ke,this.bound=Ke,this._lSpace=Ke,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,o){var a,r,n,i,l=this.conf.padding,s=this._lSpace,c=this.rawText,h=t.gLegend.getFromEnv("chartConfig");return s&&!o?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:Ke,smartText:Ke}},a=t.smartLabel,c?((r=tt(e,{})).height-=2*l.v,r.width-=2*l.h,r.x+=l.h,r.y+=l.v,a.useEllipsesOnOverflow(h.useEllipsesWhenOverflow),at(i=tt(this.conf.style,{})),a.setStyle(this._metaStyle=i),n=a.getSmartText(c,r.width,r.height),r.height=n.height,r.width=n.width,e.height=n.height+2*l.v,e.width=n.width+2*l.h,s.node.smartText=n,s.node.logicArea=r,s.bound=e,e):s.bound)}draw(){var e,t,o,a,r,n,i,l,s,c=this.conf,h=c.bound||{};return 3<=arguments.length?(r=arguments[0],n=arguments[1],i=arguments[2]):2<=arguments.length&&(r=arguments[0],i=arguments[1]),this.group=e=(s=i.animationManager).setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:c.style,component:Ue,container:i.parentLayer}),this.getLogicalSpace(n,i),l=(o=this._lSpace).node,this.bound=t=s.setAnimation({el:this.bound||"rect",attr:o.bound,css:h.style,container:e,component:Ue}),a="string"==typeof r?this.LegendCaption[r.toUpperCase()].x(l.smartText,n||l.logicArea):r,this.node=s.setAnimation({el:this.node||"text",attr:{text:l.smartText.text,x:a,y:l.logicArea.y+l.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:c.style.fill},container:e,component:Ue}),{group:e,bound:t,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}).configure(p.caption,c),e.addCompositions(this.componentCaption,qe.CAPTION)):(e.removeCompositions(qe.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,qe.RANGE),l&&i.addCompositions(l,qe.AXIS_LABEL),i.addCompositions(t,qe.LEGEND_AXIS),i.addCompositions(s,qe.AXIS_VALUE),e.addCompositions(i,qe.LEGEND_BODY),g.elem.gl=new class{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}(e)}getValueRange(){var e,t=this.elem&&this.elem.sGroup,o=t.sliders,a=t.extremes;return e=a[1]-a[0]+o.true.currPos,[{min:t.getValueFormPixel(o.false.currPos),max:t.getValueFormPixel(e)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,o,a=this,r=a.conf,n={height:0,width:0},i=a.drawOptions,l=a.getFromEnv("chartConfig");return a._recalculateLogicalSpace?a._dontPlot?n:(a._recalculateLogicalSpace=!1,a.postConfigureInit(),r.showLegend?(o=i.refOffsetKey,a.drawOptions.refSide=l[i.refSideKey],a.drawOptions.refOffset=l[o],a.drawOptions.maxOtherSide=e||a.drawOptions.maxOtherSide,a.elem.gl&&(t=a.elem.gl.getLogicalSpace(a.drawOptions,!0),a.elem.gl&&a.setCalculatedLogicalSpace(t)),a.getCalculatedLogicalSpace()):n):(o=i.refOffsetKey,a.drawOptions.refSide=l[i.refSideKey],a.drawOptions.refOffset=l[o],a.drawOptions.maxOtherSide=e||a.drawOptions.maxOtherSide,t=a.elem.gl.getLogicalSpace(a.drawOptions,!0),a.setCalculatedLogicalSpace(t),a.getCalculatedLogicalSpace()||n)}resetLegend(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}allocatePosition(){var e,t,o,a,r,n,i=this.getFromEnv("chart"),l=i.config,s=this.conf||{},c=s.legendPosition,h=l.canvasLeft,d=l.canvasTop,g=l.canvasWidth,p=l.canvasHeight,b=l.marginBottom,u=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=s.width=e.width,a=s.height=e.height,"bottom"===c?(r=h+(0>(t=g-o)?0:t/2),n=l.height-e.height-b-(l.actionBarHeight||0)):(n=d+(0>(t=p-a)?0:t/2),r=l.width-e.width-u),s.xPos=r,s.yPos=n)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{};!e.config.gLegendEnabled||t&&e.hasGradientLegend&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,o){var a,r=this,n=r.conf;return r._dontPlot?void 0:n.showLegend?(r.drawOptions.animationManager=o.animationManager,r.drawOptions.parentGroup=o.parentGroup,r.drawOptions.x=e,r.drawOptions.y=t,r.drawOptions.maxOtherSide=r.drawOptions.maxOtherSide||o.maxOtherSide,a=r.elem.gl.draw(r.drawOptions).getBBox(),n.xPos=a.x,n.yPos=a.y,n.height=a.height,n.width=a.width,void(r.enabled=!0)):void(r.enabled=!1)}},"gLegend",1),(s=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",s)):"icon"===t?(e.deleteFromEnv("gLegend"),s&&s.remove(),Object(n.M)(e,ct.a,"legend",1,{showLegend:!0}),(l=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",l)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),s&&s.remove(),l&&l.remove())}(e)};let dt,gt=Object(u.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},h),pt="0,100",bt={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},ut={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){let e,t,o,a,r,n,i,l=this.jsVars.instanceAPI.getDatasets()||[],s=l.length,c=[];for(e=0;e<s;e++)if("entities"===(i=(o=l[e]||[]).getName())){t=o;break}for(e in s=(a=t.components.data).length,a)a.hasOwnProperty(e)&&c.push({id:(n=(r=a[e]||{}).config||{}).id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText});return c},getMapAttribute:function(){return Object(g.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){let e=this;return Object(g.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let t,o,a,r,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(r=(o=n[t]||[]).getName())){a=o;break}a&&!a.addMarkerItem(e)&&Object(g.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){let o,a,r,n,i=this.jsVars.instanceAPI.getDatasets()||[],l=i.length;for(o=0;o<l;o++)if("markers"===(n=(a=i[o]||[]).getName())){r=a;break}r&&e&&(e=(e+vt).toLowerCase(),r.updateMarkerItem(e,t))},removeMarker:function(e){let t,o,a,r,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(r=(o=n[t]||[]).getName())){a=o;break}e&&(e=(e+vt).toLowerCase(),a._removeMarkerItem(e))}},mt="none",ft=", ",vt="",yt="bottom",Ct="circle",Ot=window.Math,xt=Ot.min,kt=Ot.max,wt=function(e,t){let o=Object(n.Da)(t.getFromEnv("chart-container"),e),a=o.chartX,r=o.chartY,i=t.config,l=i.canvasLeft,s=i.canvasTop,c=i.canvasLeft+i.canvasWidth,h=i.canvasHeight+i.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,a>l&&a<c&&r>s&&r<h&&(o.insideCanvas=!0),o};class Ft extends c.a{constructor(e,t){for(var o in super(),this.subpalette="",this.key="",this.index=t,e)this.subpalette=gt[e[o]],this[o]=this.subpalette instanceof Array?this.subpalette[t]:this.subpalette,this.key=o}}class jt extends s{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[pt,pt,pt,pt,pt],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=bt,this.eiMethods=ut,this.registerFactory("legend",ht,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",Xe,["legend"]),this.registerFactory("dataset",Ze,["colormanager-decider"]),this.registerFactory("canvas",Ve.a)}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let t,o=this,a=o.getChildren("colorPalette")&&o.getChildren("colorPalette")[0];t=e.chart=e.chart||e.graph||e.map||{},o.jsonData=e,Object(n.M)(o,b.a,"mapAnnotations"),a||(a=new Ft(this.colorPaletteMap,(0<t.palette&&6>t.palette?t.palette:Object(n.bb)(o.paletteIndex,1))-1),o.attachChild(a,"colorPalette")),o.config.skipCanvasDrawing=!0,super.configureAttributes(e),o._parseBackgroundCosmetics()}parseChartAttr(e){let t,o,a,r,i,l=this,s=l.jsonData,c=s.chart||s.map,h=s.markers,d=new Ft(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:Object(n.bb)(l.paletteIndex,1))-1),g=Object(n.Za)(c.entitybordercolor,c.bordercolor,d.plotbordercolor),p=Object(n.Za)(c.entityfillcolor,c.fillcolor,d.plotfillcolor),b=Object(n.Za)(c.entityfillalpha,c.fillalpha,d.plotfillalpha),u=Object(n.Za)(c.entityfillratio,c.fillratio,d.plotfillratio),m=Object(n.Za)(c.entityfillangle,c.fillangle,d.plotfillangle),f=Object(n.Za)(c.nullentityfillcolor,c.nullentitycolor,p),v=Object(n.bb)(c.usevaluesformarkers,s.markers&&s.markers.items&&s.markers.items.length,!(s.markers&&s.markers.application&&s.markers.application.length&&s.markers.definition&&s.markers.definition.length));super.parseChartAttr(e),(t=l.config).origMarginTop=Object(n.bb)(c.charttopmargin,c.maptopmargin,11),t.origMarginLeft=Object(n.bb)(c.chartleftmargin,c.mapleftmargin,11),t.origMarginBottom=Object(n.bb)(c.chartbottommargin,c.mapbottommargin,11),t.origMarginRight=Object(n.bb)(c.chartrightmargin,c.maprightmargin,11),t.labelsOnTop=Object(n.bb)(c.entitylabelsontop,1),o=(i=t.style).inCancolor,t.entityOpts={baseScaleFactor:t.baseScaleFactor,dataLabels:{style:{fontFamily:a=i.inCanfontFamily,fontSize:r=i.inCanfontSize,lineHeight:i.inCanLineHeight,color:i.inCancolor}},fillColor:p,fillAlpha:b,fillRatio:u,fillAngle:m,borderColor:g,borderAlpha:Object(n.Za)(c.entityborderalpha,c.borderalpha,l.borderAlpha,"100"),borderThickness:Object(n.bb)(c.showentityborder,c.showborder,1)?Object(n.bb)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(n.bb)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(n.Za)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,d.plothoverfillcolor),hoverFillAlpha:Object(n.Za)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,d.plothoverfillalpha),hoverFillRatio:Object(n.Za)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,d.plothoverfillratio),hoverFillAngle:Object(n.Za)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,d.plothoverfillangle),hoverBorderThickness:Object(n.Za)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(n.Za)(c.entityborderhovercolor,g,d.plotbordercolor),hoverBorderAlpha:Object(n.Za)(c.entityborderhoveralpha,d.plotborderalpha),nullEntityColor:f,nullEntityAlpha:Object(n.Za)(c.nullentityfillalpha,c.nullentityalpha,b),nullEntityRatio:Object(n.Za)(c.nullentityfillratio,c.nullentityratio,u),nullEntityAngle:Object(n.Za)(c.nullentityfillangle,c.nullentityangle,m),connectorColor:Object(n.Za)(c.labelconnectorcolor,c.connectorcolor,o),connectorAlpha:Object(n.Za)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(n.bb)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(n.bb)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(n.bb)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(n.bb)(c.labelpadding,5),showLabels:Object(n.bb)(c.showlabels,1),labelsOnTop:Object(n.bb)(c.entitylabelsontop,1),includeNameInLabels:Object(n.bb)(c.includenameinlabels,1),includeValueInLabels:Object(n.bb)(c.includevalueinlabels,0),useSNameInTooltip:Object(n.bb)(c.usesnameintooltip,0),useShortName:Object(n.bb)(c.usesnameinlabels,1),labelSepChar:Object(n.Za)(c.labelsepchar,ft),showTooltip:Object(n.bb)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(n.Za)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(n.bb)(c.hidenullentities,0),showHiddenEntityBorder:Object(n.bb)(c.showhiddenentityborder,1),showNullEntityBorder:Object(n.bb)(c.shownullentityborder,1),hiddenEntityColor:Object(n.Za)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?f:"ffffff"),hiddenEntityAlpha:Object(n.Za)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(n.bb)(c.showshadow,l.defaultPlotShadow,d.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:Object(n.Za)(c.markerfont,a),fontSize:Object(n.bb)(c.markerfontsize,parseInt(r,10)),fontColor:Object(n.Za)(c.markerfontcolor,o)}},showTooltip:Object(n.bb)(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(n.bb)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(n.bb)(c.showmarkerhovereffect,1),labelPadding:Object(n.Za)(c.markerlabelpadding,"5"),labelWrapWidth:Object(n.bb)(c.markerlabelwrapwidth,0),labelWrapHeight:Object(n.bb)(c.markerlabelwrapheight,0),fillColor:Object(n.Za)(c.markerfillcolor,c.markerbgcolor,d.markerfillcolor),fillAlpha:Object(n.Za)(c.markerfillalpha,d.markerfillalpha),fillAngle:Object(n.Za)(c.markerfillangle,d.markerfillangle),fillRatio:Object(n.Za)(c.markerfillratio,d.markerfillratio),fillPattern:Object(n.Za)(c.markerfillpattern,d.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(n.Za)(c.markerborderthickness,1),borderColor:Object(n.Za)(c.markerbordercolor,d.markerbordercolor),borderAlpha:Object(n.bb)(c.markerborderalpha,d.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(n.bb)(c.markerradius&&Object(n.ob)(c.markerradius),7),shapeId:Object(n.Za)(c.defaultmarkershape,Ct),labelSepChar:Object(n.Za)(c.labelsepchar,ft),tooltipSepChar:Object(n.Za)(c.tooltipsepchar,", "),autoScale:Object(n.bb)(c.autoscalemarkers,0),tooltext:Object(n.Za)(h&&h.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(n.bb)(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(n.Za)(c.valuemarkeralpha,"75"),hideNull:Object(n.bb)(c.hidenullmarkers,0),nullRadius:Object(n.bb)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(n.bb)(c.adjustviewportformarkers,0),startAngle:Object(n.bb)(c.markerstartangle,90),maxRadius:Object(n.bb)(c.maxmarkerradius,0),minRadius:Object(n.bb)(c.minmarkerradius,0),applyAll:Object(n.bb)(c.applyallmarkers,0),shadow:Object(n.bb)(c.showmarkershadow,c.showshadow,0)},t.connectorOpts={showHoverEffect:Object(n.bb)(c.showconnectorhovereffect,1),thickness:Object(n.bb)(c.connectorthickness,c.markerconnthickness,"2"),color:Object(n.Za)(c.connectorcolor,c.markerconncolor,d.markerbordercolor),alpha:Object(n.Za)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(n.bb)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(n.Za)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,d.markerbordercolor),hoverAlpha:Object(n.Za)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(n.bb)(c.connectordashed,c.markerconndashed,0),dashLen:Object(n.bb)(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(n.bb)(c.connectordashgap,c.markerconndashgap,2),font:Object(n.Za)(c.connectorfont,c.markerconnfont,a),fontColor:Object(n.Za)(c.connectorfontcolor,c.markerconnfontcolor,o),fontSize:Object(n.bb)(c.connectorfontsize,c.markerconnfontsize,parseInt(r,10)),showLabels:Object(n.bb)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(n.Za)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,d.plotfillcolor),labelBorderColor:Object(n.Za)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,d.markerbordercolor),shadow:Object(n.bb)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(n.bb)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(n.Za)(h&&h.connectortooltext,c.connectortooltext),hideOpen:Object(n.bb)(c.hideopenconnectors,1)},t.adjustViewPortForMarkers=Object(n.bb)(c.adjustviewportformarkers,v)}_attachMouseEvents(){let e=this,t=e.getFromEnv("eventListeners"),o=e.getFromEnv("chart-container");d.a.unlisten(o,n.Ja?"touchstart":"mousemove",jt.searchMouseMove),t.push(d.a.listen(o,"touchstart mousemove",jt.searchMouseMove,e))}static searchMouseMove(e){let t,o=e.data,a=o.config;!o.getFromEnv("chart-container")||(t=wt(e,o))&&t.insideCanvas&&(a.lastMouseEvent=e,o._searchNearestNeighbour({x:t.chartX,y:t.chartY}))}_searchNearestNeighbour(e){let t,o=this,a=o.getDatasets()[1];if(a){if(!a.components.kDTree)return;(t=a.getElement(e))?o.config.lastHoveredPoint!==t&&a.highlightPoint(t):a.highlightPoint(!1)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,t=this,o=t.getChildren("background")[0].config,a=t.getChildren("colorPalette")[0],r=t.getFromEnv("chart-attrib");e=o.showBorder=Object(n.bb)(r.showcanvasborder,1),o.borderWidth=e?Object(n.bb)(r.canvasborderthickness,1):0,o.borderRadius=o.borderRadius=Object(n.bb)(r.canvasborderradius,0),o.borderDashStyle=o.borderDashStyle=Object(n.bb)(r.borderdashed,0)?Object(n.Y)(Object(n.bb)(r.borderdashlen,4),Object(n.bb)(r.borderdashgap,2)):mt,o.borderAlpha=Object(n.Za)(r.canvasborderalpha,a.borderAlpha),o.borderColor=o.borderColor=Object(p.c)(Object(n.Za)(r.canvasbordercolor,a&&a.borderColor),o.borderAlpha)}_getBackgroundCosmetics(){let e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(n.Za)(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(n.Za)(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(n.Za)(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(n.Za)(t.bgratio,t.canvasbgratio,o.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,t=e.config,o=e.getFromEnv("chart-attrib")||e.jsonData.map,a=e.getChildren("canvas")[0].config;t.origMarginTop=Object(n.bb)(o.maptopmargin,11),t.origMarginLeft=Object(n.bb)(o.mapleftmargin,11),t.origMarginBottom=Object(n.bb)(o.mapbottommargin,11),t.origMarginRight=Object(n.bb)(o.maprightmargin,11),t.origCanvasLeftMargin=Object(n.bb)(o.canvasleftmargin,0),t.origCanvasRightMargin=Object(n.bb)(o.canvasrightmargin,0),t.origCanvasTopMargin=Object(n.bb)(o.canvastopmargin,0),t.origCanvasBottomMargin=Object(n.bb)(o.canvasbottommargin,0),a.canvasBorderRadius=Object(n.bb)(o.canvasborderradius,0),a.origCanvasTopPad=Object(n.bb)(o.canvastoppadding,0),a.origCanvasBottomPad=Object(n.bb)(o.canvasbottompadding,0),a.origCanvasLeftPad=Object(n.bb)(o.canvasleftpadding,0),a.origCanvasRightPad=Object(n.bb)(o.canvasrightpadding,0)}preliminaryScaling(){let e,t,o,a=this.jsonData,r=a.markers&&a.markers.items||[],n=r&&r.length||0,i=1/0,l=1/0,s=-1/0,c=-1/0;for(;n--;)t=+(o=r[n]).y,i=xt(i,e=+o.x),l=xt(l,t),s=kt(s,e),c=kt(c,t);return{x:i,y:l,x1:s,y1:c}}getScalingParameters(e,t,o,a){let r,n,i=e/t,l=o/(e*this.config.baseScaleFactor),s=a/(t*this.config.baseScaleFactor),c=0,h=0;return l>s?(c+=(o-a*i)/2,n=200/(t*(r=s))):(h+=(a-o/i)/2,n=200/(e*(r=l))),{scaleFactor:r,strokeWidth:n,translateX:c,translateY:h}}calculateMarkerBounds(e,t,o){let a,r,n,i,l,s,c,h,d,g,p,b,u,m,f=this,v=f.config,y=v.markerOpts,C=f.getDatasets(),O=f.getDataLimits(),x=O.dataMin,k=O.dataMax,w=y.hideNull,F=y.nullRadius,j=y.valueToRadius,A=1/0,L=1/0,S=-1/0,E=-1/0;for(s=0,d=C.length;s<d;s++)"markers"===(c=(h=C[s]).getName())&&(a=h);if(a)for(s in a.calculateMarkerRadiusLimits(),n=(r=a.config||{}).minRadius,i=r.maxRadius,l=a.components&&a.components.markerObjs||{})u=(v=(m=l[s]).config).definition||{},null!==v.cleanValue?(j&&u.radius===dt&&(v.radius=n+(i-n)*(v.cleanValue-x)/(k-x)),p=(+u.y+o)*e,A=xt(A,(g=(+u.x+t)*e)-(b=+v.radius)),L=xt(L,p-b),S=kt(S,g+b),E=kt(E,p+b)):w?v.__hideMarker=!0:null===v.radius&&(v.radius=F);return{x:A,y:L,x1:S,y1:E}}_spaceManager(){let e,t,o,a,r,i,l,s,c,h=this,d=h.config,g=h.getChildren("legend")&&h.getChildren("legend")[0],p=g&&g.config.legendPos,b=h.getFromEnv("chart-attrib"),u=d.origMarginLeft,m=d.origMarginTop,f=h.config.baseWidth,v=h.config.baseHeight,y={},C=0,O=0,x=d.markerOpts,k=d.borderWidth=d.showBorder?Object(n.bb)(b.borderthickness,1):0;h._allocateSpace({top:k,bottom:k,left:k,right:k}),h._allocateSpace(h._manageActionBarSpace&&h._manageActionBarSpace(.225*d.availableHeight)||{}),d.showLegend&&h._manageLegendSpace(s="right"===p?.3*d.canvasWidth:.3*d.canvasHeight),c=h._manageChartMenuBar(e=p===yt?.225*d.canvasHeight:.225*d.canvasWidth),o=d.canvasWidth,a=d.canvasHeight,x.dataEnabled?(d.adjustViewPortForMarkers?((y=h.preliminaryScaling()).x1>f&&(f=y.x1),0>y.x&&(f+=-y.x,C=-y.x),y.y1>v&&(v=y.y1),0>y.y&&(v+=-y.y,O=-y.y),t=h.getScalingParameters(f,v,o,a),i=a,l=o,0>(y=h.calculateMarkerBounds(t.scaleFactor*h.config.baseScaleFactor,C,O)).x&&(u+=-y.x,o+=y.x),0>y.y&&(m+=-y.y,a+=y.y),y.x1>l&&(o-=y.x1-l),y.y1>i&&(a-=y.y1-i)):(t=h.getScalingParameters(f,v,o,a),h.calculateMarkerBounds(t.scaleFactor*h.config.baseScaleFactor,C,O)),u+=C*(t=h.getScalingParameters(f,v,o,a)).scaleFactor*h.config.baseScaleFactor,m+=O*t.scaleFactor*h.config.baseScaleFactor):t=h.getScalingParameters(f,v,o,a),h.config.scalingParams=t,r=t.scaleFactor,t.translateX+=u,t.translateY=t.translateY+m+c.top||0,t.sFactor=r*h.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",r,",",r,",0,0"].join(""),h.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(r?r*h.config.baseScaleFactor:1),yscale:100*(r?r*h.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},h.getChildren("mapAnnotations")[0].clear(),h.getChildren("mapAnnotations")[0].configureAttributes()}getDataLimits(){let e,t,o,a=this.getDatasets(),r=a.length,n=1/0,i=-1/0;for(o=0;o<r;o++)t=(e=a[o]).getDataLimits(),n=xt(n,t.min),i=kt(i,t.max);return{dataMin:n,dataMax:i}}getEntityPaths(e){let t,o={},a=this.config.entities;if(e){for(t in a)o[t]=a[t];return o}return a}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}var At=jt;o.d(t,"Maps",function(){return At}),t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(At)}}}]);